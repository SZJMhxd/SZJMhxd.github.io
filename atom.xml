<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>十早九木のBlog</title>
  
  
  <link href="https://www.szjm.online/atom.xml" rel="self"/>
  
  <link href="https://www.szjm.online/"/>
  <updated>2022-10-12T01:37:34.072Z</updated>
  <id>https://www.szjm.online/</id>
  
  <author>
    <name>十早九木</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8811%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8811%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.785Z</published>
    <updated>2022-10-12T01:37:34.072Z</updated>
    
    <content type="html"><![CDATA[<h4 id="智能设备管理-筛选失效"><a href="#智能设备管理-筛选失效" class="headerlink" title="智能设备管理 筛选失效"></a>智能设备管理 筛选失效</h4><p>多次查询测试猜测是编码错误</p><p>在数据库和实体类多次测试后发现正确顺序</p><p>修改筛选组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 10px&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">lay-verify</span>=<span class="string">&quot;required&quot;</span> <span class="attr">id</span>=<span class="string">&quot;estate&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm mb-3&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>全部<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>故障<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>正常<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>待维护<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>已发布工单<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="设备厂商-筛选失效"><a href="#设备厂商-筛选失效" class="headerlink" title="设备厂商 筛选失效"></a>设备厂商 筛选失效</h4><p>修改查询地址 设置为对应id</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;info-label&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;width: 100px; text-align: left;&quot;</span>&gt;</span>设备厂商: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 10px&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;sportEnterprise&quot;</span> <span class="attr">lay-verify</span>=<span class="string">&quot;required&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">id</span>=<span class="string">&quot;seprovince&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm mb-3&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">onclick</span>=<span class="string">&quot;changedSEProvince(this.value)&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location=<span class="string">&#x27;/park/equipment/listequipment1?myUrl=/park/equipment/filedManageInsert&amp;startNum=0&amp;pageSize=10&amp;page=1&amp;jump=0&amp;power=1&amp;name=&#x27;</span>+name+<span class="string">&#x27;&amp;fieldid=&#x27;</span>+<span class="string">&#x27;&amp;sportenterpriseid=&#x27;</span>+sid+<span class="string">&#x27;&amp;estate=&#x27;</span>+<span class="string">&#x27;&amp;equipmenttypeid=&#x27;</span>+nameType1;</span><br></pre></td></tr></table></figure><h4 id="去除平均日使用次数列"><a href="#去除平均日使用次数列" class="headerlink" title="去除平均日使用次数列"></a>去除<code>平均日使用次数</code>列</h4><p>查看代码 发现这是被写死的0 </p><p>注释掉相关代码</p><h4 id="健身园管理员查询错误"><a href="#健身园管理员查询错误" class="headerlink" title="健身园管理员查询错误"></a>健身园管理员查询错误</h4><p>健身园管理员查询智能设备的时候，会查询到传统的健身设备</p><p>测试发现 健身园查询智能设备的时候，查询的是数据大屏，而数据大屏查询到的是所有的设备 这才能看到传统的健身设备</p><p>查询按钮的方法是正常查询的 所以问题应该在目录上</p><p>修改目录对应的地址</p><h4 id="返回界面错误"><a href="#返回界面错误" class="headerlink" title="返回界面错误"></a>返回界面错误</h4><p>传统健身器材发起工单或取消返回后 是智能健身器材界面</p><p>测试后发现 传统健身器材管理和智能健身器材管理使用的是同一个发起工单 根据不同的flag返回 但是传统和智能使用的是一个flag</p><p>干脆新写一个</p><h4 id="修改目录名字"><a href="#修改目录名字" class="headerlink" title="修改目录名字"></a>修改目录名字</h4><p>在<code>common</code>中修改目录名称</p><h4 id="去除搜索框默认内容"><a href="#去除搜索框默认内容" class="headerlink" title="去除搜索框默认内容"></a>去除搜索框默认内容</h4><p>删除相关字段</p><h4 id="删除分页栏"><a href="#删除分页栏" class="headerlink" title="删除分页栏"></a>删除分页栏</h4><p>注释掉相关内容</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;智能设备管理-筛选失效&quot;&gt;&lt;a href=&quot;#智能设备管理-筛选失效&quot; class=&quot;headerlink&quot; title=&quot;智能设备管理 筛选失效&quot;&gt;&lt;/a&gt;智能设备管理 筛选失效&lt;/h4&gt;&lt;p&gt;多次查询测试猜测是编码错误&lt;/p&gt;
&lt;p&gt;在数据库和实体类多次测试后</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8810%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8810%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.747Z</published>
    <updated>2022-10-11T01:33:19.990Z</updated>
    
    <content type="html"><![CDATA[<h4 id="删除健身园管理员页面中的健身园筛选和已回收的分页"><a href="#删除健身园管理员页面中的健身园筛选和已回收的分页" class="headerlink" title="删除健身园管理员页面中的健身园筛选和已回收的分页"></a>删除健身园管理员页面中的健身园筛选和<code>已回收的</code>分页</h4><p>需求的删除注释掉即可</p><p>但是目前所有的人公有一个界面 在还没有明确地等级分级之前 无法对不同等级管理员进行分级 展示不同的界面</p><p>回退 </p><h4 id="隐藏与展示"><a href="#隐藏与展示" class="headerlink" title="隐藏与展示"></a>隐藏与展示</h4><p>想到使用if标签控制隐藏与展示 但是html没有if标签</p><p>想到使用js控制有id的标签</p><p>参照这个<a href="https://www.php.cn/div-tutorial-471537.html">教程</a></p><p>使用<code>visibility</code>特性 能够成功控制标签的隐藏与展示</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;#import &quot;/xhtml/common/common.html&quot; as crazyasp&gt;</span><br><span class="line">&lt;@crazyasp.managePage title=&quot;品牌管理&quot;&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>品牌管理<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;visibility:visible;&quot;</span>&gt;</span></span><br><span class="line">DIV 3</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin:5px 20px;height: 50px  &quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">onclick</span>=<span class="string">&quot;show()&quot;</span>&gt;</span>切换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> div3=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div3&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">if</span>(div3.<span class="property">style</span>.<span class="property">visibility</span>==<span class="string">&#x27;visible&#x27;</span>) div3.<span class="property">style</span>.<span class="property">visibility</span>=<span class="string">&#x27;hidden&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">else</span> div3.<span class="property">style</span>.<span class="property">visibility</span>=<span class="string">&#x27;visible&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">&lt;/@crazyasp.managePage&gt;</span><br></pre></td></tr></table></figure><h4 id="获取用户的power等级"><a href="#获取用户的power等级" class="headerlink" title="获取用户的power等级"></a>获取用户的power等级</h4><p>已知在页面头部获取了用户信息 </p><p>查看后发现这个信息是全局的 在html可以直接通过<code>$&#123;fituser.nickName&#125;</code>的方式展示</p><p>在js里可以使用<code>&#39;$&#123;fituser&#125;&#39;</code>的方法获取</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> user = <span class="string">&#x27;$&#123;fituser&#125;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;visibility:visible;&quot;</span>&gt;</span></span><br><span class="line">DIV 3</span><br><span class="line">$&#123;fituser.nickName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="在页面加载时运行"><a href="#在页面加载时运行" class="headerlink" title="在页面加载时运行"></a>在页面加载时运行</h4><p>html是从前往后的加载顺序 所以js需要放在div后面 才能识别的div并对其状态进行修改</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div3&quot;</span> <span class="attr">style</span>=<span class="string">&quot;visibility:visible;&quot;</span>&gt;</span></span><br><span class="line">   DIV 3</span><br><span class="line">   $&#123;fituser.nickName&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">var</span> div3=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div3&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">var</span> user = <span class="string">&#x27;$&#123;fituser.power&#125;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;user&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(user)</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(div3)</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;user&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">if</span>(user == <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;user==1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      div3.<span class="property">style</span>.<span class="property">visibility</span>=<span class="string">&#x27;hidden&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript">   <span class="comment">// else div3.style.visibility=&#x27;visible&#x27;;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="删除健身园筛选项"><a href="#删除健身园筛选项" class="headerlink" title="删除健身园筛选项"></a>删除健身园筛选项</h4><p>对给div添加id和visibility特性 然后在js根据power修改div的出现与隐藏</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;feildscreen&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">style</span>=<span class="string">&quot;visibility:visible;display: flex; margin-bottom: 0px; display: flex; justify-content: row;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;info-label&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&quot;width: 130px; text-align: left;&quot;</span>&gt;</span>所属的健身园: <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(userPower === <span class="string">&#x27;7&#x27;</span>)&#123;</span><br><span class="line">    power = <span class="number">7</span>;</span><br><span class="line">    curUserId = <span class="title function_">clearComma</span>(userId)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;==7&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> feildscreen = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;feildscreen&quot;</span>);</span><br><span class="line">    feildscreen.<span class="property">style</span>.<span class="property">visibility</span>=<span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> retag = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;retag&quot;</span>);</span><br><span class="line">    retag.<span class="property">style</span>.<span class="property">visibility</span>=<span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">    &lt;#<span class="keyword">if</span> fituser.<span class="property">field</span>??&gt;</span><br><span class="line">        powerFieldId = <span class="title function_">clearComma</span>(<span class="string">&#x27;$&#123;fituser.field.id&#125;&#x27;</span>)</span><br><span class="line">    &lt;/#<span class="keyword">if</span>&gt;</span><br><span class="line">    $(<span class="string">&quot;#profile-tab&quot;</span>).<span class="title function_">hide</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="删除子标签页"><a href="#删除子标签页" class="headerlink" title="删除子标签页"></a>删除子标签页</h4><p>有的界面是div 可以和健身园筛选项一样删除</p><p>但是有的界面是列表 需要靠删除列表元素 如果只是删除元素的话 会留下一个null</p><p>我这里使用的是删除列表长度 这样就能删除掉最后一个元素</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(userPower === <span class="string">&#x27;7&#x27;</span>)&#123;</span><br><span class="line">    tabData.<span class="property">length</span> -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;删除健身园管理员页面中的健身园筛选和已回收的分页&quot;&gt;&lt;a href=&quot;#删除健身园管理员页面中的健身园筛选和已回收的分页&quot; class=&quot;headerlink&quot; title=&quot;删除健身园管理员页面中的健身园筛选和已回收的分页&quot;&gt;&lt;/a&gt;删除健身园管理员页面中的健身</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8809%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8809%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.727Z</published>
    <updated>2022-10-10T01:36:45.836Z</updated>
    
    <content type="html"><![CDATA[<h4 id="弹窗"><a href="#弹窗" class="headerlink" title="弹窗"></a>弹窗</h4><p>之前已经确定弹窗只能在<code>div标签</code>的一定范围里显示 效果会很难看</p><p>但是在网上找了很久也是没有更好的解决方案</p><p>最后还是使用了最初的方法</p><h4 id="按钮数据传输"><a href="#按钮数据传输" class="headerlink" title="按钮数据传输"></a>按钮数据传输</h4><p>之前的修改是个页面 数据是使用地址栏传输的 </p><p>而弹窗不能使用地址栏传输数据</p><p>其他的数据传输是直接使用onclick方法 能传输当前行的数据 </p><p>而弹窗是onclick打开一个新的标签 不能传输数据</p><p>强行传输的话只能传输第一行的数据</p><p>于是我想到了一个方法 </p><p>弹窗的onclick把当前行的数据放到<code>window</code>的全局变量里 </p><p>然后弹窗里的方法使用的是<code>window</code>的变量值 就能解决这个问题</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;button type=&quot;button&quot; class=&quot;btn btn-primary modify&quot;  onclick=&quot;update(&#x27;$&#123;item.countys.id&#125;&#x27;,&#x27;$&#123;item.countys.name&#125;&#x27;,&#x27;$&#123;item.countys.parent.id&#125;&#x27;,&#x27;$&#123;item.countys.parent.parent.id&#125;&#x27;)&quot;&gt;修改&lt;/button&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary modify&quot;</span> <span class="attr">href</span> = <span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span> = <span class="string">&quot;setupData(&#x27;$&#123;item.countys.id&#125;&#x27;,&#x27;$&#123;item.countys.parent.id&#125;&#x27;);document.getElementById(&#x27;uptown&#x27;).style.display=&#x27;block&#x27;;document.getElementById(&#x27;upfade&#x27;).style.display=&#x27;block&#x27;&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;uptown&quot;</span> <span class="attr">class</span>=<span class="string">&quot;white_content1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: -10px;text-align: right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span> = <span class="string">&quot;document.getElementById(&#x27;uptown&#x27;).style.display=&#x27;none&#x27;;document.getElementById(&#x27;upfade&#x27;).style.display=&#x27;none&#x27;&quot;</span>&gt;</span>X<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>修改街镇<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:5%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: left&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:2%;color: #ff0000;text-align: left&quot;</span> &gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #000000;text-align: left&quot;</span>&gt;</span>街镇行政区编号<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;uptowncode&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:35px; width:90%;border-radius:5px; border:1px solid #616161&quot;</span>/&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>0/50<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 15px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: left&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:2%;color: #ff0000;text-align: left&quot;</span> &gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #000000;text-align: left&quot;</span>&gt;</span>街镇名称<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;uptownname&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:35px; width:90%;border-radius:5px; border:1px solid #616161&quot;</span>/&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>0/50<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center; margin-top:4%&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary modify&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;update()&quot;</span>&gt;</span>完成<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;upfade&quot;</span> <span class="attr">class</span>=<span class="string">&quot;black_overlay1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger delet&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;delData(&#x27;$&#123;item.countys.id&#125;&#x27;)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.black_overlay1</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none; <span class="comment">/* 此元素不会被显示*/</span></span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#090909</span>;</span><br><span class="line">    <span class="attribute">z-index</span>:<span class="number">1001</span>; <span class="comment">/* z-index 属性设置元素的堆叠顺序。拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面。*/</span></span><br><span class="line">    -moz-<span class="attribute">opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">    <span class="attribute">opacity</span>:<span class="number">0.8</span>; <span class="comment">/* opacity 属性设置元素的不透明级别。*/</span></span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">88</span>);</span><br><span class="line">    <span class="comment">/* 所有浏览器都支持 opacity 属性。   注释：IE8 以及更早的版本支持替代的 filter 属性。例如：filter:Alpha(opacity=50)。*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.white_content1</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">align-content</span>: center;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#0b0b0b</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">5%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">30%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">40%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60%</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="comment">/*border: 10px solid orange;*/</span></span><br><span class="line">    <span class="comment">/*background-color: white;*/</span></span><br><span class="line">    <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(<span class="number">117.76deg</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>) -<span class="number">7.21%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>) <span class="number">118.08%</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">#888888</span>;</span><br><span class="line">    <span class="attribute">z-index</span>:<span class="number">1002</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setupData</span>(<span class="params">id,pid</span>)&#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">setupDataid</span> = <span class="title function_">clearComma</span>(id);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">setupDatapid</span> = <span class="title function_">clearComma</span>(pid);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">setupDataid</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">setupDatapid</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;update&quot;</span>)</span><br><span class="line">    <span class="comment">// location=&#x27;/county/updatedatecenter?myUrl=/county/town/update&amp;dj=4&amp;id=&#x27;+clearComma(id)+&#x27;&amp;name=&#x27;+name+&#x27;&amp;parent.id=&#x27;+clearComma(pid)+&#x27;&amp;parent.parent.id=&#x27;+clearComma(fid);</span></span><br><span class="line">    $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;get&quot;</span>,</span><br><span class="line">        <span class="attr">url</span>:<span class="string">&quot;/fitnessroute/county/update&quot;</span>,</span><br><span class="line">        <span class="attr">dataType</span>:<span class="string">&#x27;json&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>:&#123;</span><br><span class="line">            <span class="string">&quot;id&quot;</span>:<span class="variable language_">window</span>.<span class="property">setupDataid</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>:<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;uptownname&quot;</span>).<span class="property">value</span>,</span><br><span class="line">            <span class="string">&quot;code&quot;</span>:<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;uptowncode&quot;</span>).<span class="property">value</span>,</span><br><span class="line">            <span class="string">&quot;parent.id&quot;</span>:<span class="variable language_">window</span>.<span class="property">setupDatapid</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="comment">//console.log(res);</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">error</span>: <span class="keyword">function</span>(<span class="params">request</span>) &#123;</span><br><span class="line">            layer.<span class="title function_">msg</span>(<span class="string">&quot;修改成功！！！&quot;</span>)</span><br><span class="line">            location=<span class="string">&#x27;/county/selectdatecenter/?myUrl=/county/town/list&amp;dj=4&amp;startNum=0&amp;pageSize=10&amp;page=1&amp;countyid=&#x27;</span> + <span class="title function_">getUrlParam</span>(<span class="string">&quot;countyid&quot;</span>) +<span class="string">&quot;&amp;townsize=&quot;</span> + (<span class="built_in">parseInt</span>(<span class="title function_">getUrlParam</span>(<span class="string">&quot;townsize&quot;</span>)) + <span class="number">1</span>) +<span class="string">&quot;&amp;countyname=&quot;</span> + <span class="title function_">getUrlParam</span>(<span class="string">&quot;countyname&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="管理员等级设置"><a href="#管理员等级设置" class="headerlink" title="管理员等级设置"></a>管理员等级设置</h4><p>数据库修改自己账户为主管理员</p><p>找到界面 新增一行修改</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">lay-filter</span>=<span class="string">&quot;role&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;role&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changerole&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">title</span>=<span class="string">&quot;省级管理员&quot;</span>&gt;</span> 省级管理员</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">lay-filter</span>=<span class="string">&quot;role&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;role&quot;</span> <span class="attr">value</span>=<span class="string">&quot;4&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changerole&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">title</span>=<span class="string">&quot;市级管理员&quot;</span>&gt;</span> 市级管理员</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">lay-filter</span>=<span class="string">&quot;role&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;role&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changerole&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">title</span>=<span class="string">&quot;区县级管理员&quot;</span>&gt;</span>区县级管理员</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">lay-filter</span>=<span class="string">&quot;role&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;role&quot;</span> <span class="attr">value</span>=<span class="string">&quot;6&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changerole&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">title</span>=<span class="string">&quot;镇街级管理员&quot;</span>&gt;</span>镇街级管理员</span><br><span class="line">    <span class="comment">&lt;!--  &lt;input lay-filter=&quot;role&quot; type=&quot;radio&quot;</span></span><br><span class="line"><span class="comment">name=&quot;role&quot; value=&quot;6&quot; title=&quot;镇街级管理员&quot;&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="镇街级管理员后端查询"><a href="#镇街级管理员后端查询" class="headerlink" title="镇街级管理员后端查询"></a>镇街级管理员后端查询</h4><p>原先的查询没有任何容错 如果数据稍微不对就会报错 无法查询</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&quot;6&quot;</span>:</span><br><span class="line"><span class="type">TCounty</span> <span class="variable">tempcounty6</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment">//if (tSmartUserInfo.getCounty().getId() != null) &#123;</span></span><br><span class="line"><span class="keyword">if</span> (tSmartUserInfo.getCounty().getId() != <span class="number">0</span>) &#123;</span><br><span class="line">    tempcounty6 = thisOption.findCounty(tSmartUserInfo.getCounty().getId());</span><br><span class="line">    <span class="keyword">if</span> (tempcounty6 != <span class="literal">null</span>)&#123;</span><br><span class="line">        jsonObject.put(<span class="string">&quot;town&quot;</span>, tempcounty6.getName());</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        jsonObject.put(<span class="string">&quot;town&quot;</span>, <span class="string">&quot;未设置&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    jsonObject.put(<span class="string">&quot;town&quot;</span>, <span class="string">&quot;错误数据&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">TCounty</span> <span class="variable">county6</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (tempcounty6 != <span class="literal">null</span> &amp;&amp; tempcounty6.getParent() != <span class="literal">null</span>) &#123;</span><br><span class="line">    county6 = thisOption.findCounty(tempcounty6.getParent().getId());</span><br><span class="line">    jsonObject.put(<span class="string">&quot;county&quot;</span>, county6.getName());</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">TCounty</span> <span class="variable">county7</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (county6 != <span class="literal">null</span> &amp;&amp; county6.getParent() != <span class="literal">null</span>) &#123;</span><br><span class="line">    county7 = thisOption.findCounty(county6.getParent().getId());</span><br><span class="line">    jsonObject.put(<span class="string">&quot;city&quot;</span>, county7.getName());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    jsonObject.put(<span class="string">&quot;city&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">TCounty</span> <span class="variable">county8</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (county7 != <span class="literal">null</span> &amp;&amp; county7 != <span class="literal">null</span> &amp;&amp; county7.getParent() != <span class="literal">null</span>) &#123;</span><br><span class="line">    county8 = thisOption.findCounty(county7.getParent().getId());</span><br><span class="line">    jsonObject.put(<span class="string">&quot;province&quot;</span>, county8.getName());</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    jsonObject.put(<span class="string">&quot;province&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br><span class="line">jsonObject.put(<span class="string">&quot;power&quot;</span>, <span class="string">&quot;镇级管理员&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;弹窗&quot;&gt;&lt;a href=&quot;#弹窗&quot; class=&quot;headerlink&quot; title=&quot;弹窗&quot;&gt;&lt;/a&gt;弹窗&lt;/h4&gt;&lt;p&gt;之前已经确定弹窗只能在&lt;code&gt;div标签&lt;/code&gt;的一定范围里显示 效果会很难看&lt;/p&gt;
&lt;p&gt;但是在网上找了很久也是没有更好的解决</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8808%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.10/2022%E5%B9%B410%E6%9C%8808%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.691Z</published>
    <updated>2022-10-09T01:19:20.623Z</updated>
    
    <content type="html"><![CDATA[<h4 id="弹窗"><a href="#弹窗" class="headerlink" title="弹窗"></a>弹窗</h4><p>在传统健身设备栏里 有一个展示二维码的弹窗 但是里面的按钮绑定的是生成二维码 不是展示 不清楚展示是怎么写的</p><p>网络上大部分弹窗都是指向一个新的组件 我想要一个能直接在页面里的功能</p><p>弹窗功能用<a href="https://blog.csdn.net/weixin_42245375/article/details/102567797">这个</a>实现</p><p>这个弹窗会被限制在一个大的div下 所以需要修改代码位置</p><p>然后修改样式为白底圆角 统一样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.black_overlay</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none; <span class="comment">/* 此元素不会被显示*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">0%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">0%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#090909</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>:<span class="number">1001</span>; <span class="comment">/* z-index 属性设置元素的堆叠顺序。拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面。*/</span></span></span><br><span class="line"><span class="language-css">        -moz-<span class="attribute">opacity</span>: <span class="number">0.8</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">opacity</span>:.<span class="number">80</span>; <span class="comment">/* opacity 属性设置元素的不透明级别。*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">filter</span>: <span class="built_in">alpha</span>(opacity=<span class="number">88</span>);</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 所有浏览器都支持 opacity 属性。   注释：IE8 以及更早的版本支持替代的 filter 属性。例如：filter:Alpha(opacity=50)。*/</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.white_content</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">align-content</span>: center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-color</span>: <span class="number">#0b0b0b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">25%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">30%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">40%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">35%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*border: 10px solid orange;*/</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*background-color: white;*/</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:<span class="built_in">linear-gradient</span>(<span class="number">117.76deg</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>) -<span class="number">7.21%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">1</span>) <span class="number">118.08%</span>);</span></span><br><span class="line"><span class="language-css">        <span class="attribute">z-index</span>:<span class="number">1002</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">overflow</span>: auto;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">p</span><span class="selector-class">.title</span></span></span><br><span class="line"><span class="language-css">    &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-weight</span>:bold;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>:<span class="number">150%</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: <span class="number">#0b0b0b</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>:center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;top:-50px;bottom: 50px&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary new_group1&quot;</span> <span class="attr">href</span> = <span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span> = <span class="string">&quot;document.getElementById(&#x27;light&#x27;).style.display=&#x27;block&#x27;;document.getElementById(&#x27;fade&#x27;).style.display=&#x27;block&#x27;&quot;</span>&gt;</span>新增镇街级行政区<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;light&quot;</span> <span class="attr">class</span>=<span class="string">&quot;white_content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: -10px;text-align: right&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span> = <span class="string">&quot;document.getElementById(&#x27;light&#x27;).style.display=&#x27;none&#x27;;document.getElementById(&#x27;fade&#x27;).style.display=&#x27;none&#x27;&quot;</span>&gt;</span>X<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>新建街镇<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:5%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #ff0000&quot;</span>&gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #000000&quot;</span>&gt;</span>街镇行政区编号<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;towncode&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:35px; width:90%;border-radius:5px; border:1px solid #616161&quot;</span>/&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>0/50<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 15px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #ff0000&quot;</span>&gt;</span>*<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #000000&quot;</span>&gt;</span>街镇名称<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;townname&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:35px; width:90%;border-radius:5px; border:1px solid #616161&quot;</span>/&gt;</span> <span class="tag">&lt;<span class="name">span</span>&gt;</span>0/50<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center; margin-top:4%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary modify&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;add()&quot;</span>&gt;</span>完成<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;fade&quot;</span> <span class="attr">class</span>=<span class="string">&quot;black_overlay&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="关闭按钮右上方"><a href="#关闭按钮右上方" class="headerlink" title="关闭按钮右上方"></a>关闭按钮右上方</h4><p>网上看到<code>text-align</code> 可以右对齐 但是似乎不能直接用于a标签</p><p>所以在外面又套了一个div 对div进行限制</p><h4 id="输入框"><a href="#输入框" class="headerlink" title="输入框"></a>输入框</h4><p>输入框仿照的查询输入框</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;towncode&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:35px; width:90%;border-radius:5px; border:1px solid #616161&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><h4 id="按钮位置"><a href="#按钮位置" class="headerlink" title="按钮位置"></a>按钮位置</h4><p>弹窗大小是固定的  如果超出范围会有上下滚动条 但是这在不同分辨率下不好看</p><h4 id="input对方法数据传输"><a href="#input对方法数据传输" class="headerlink" title="input对方法数据传输"></a>input对方法数据传输</h4><p>给input标签设置id  通过id获取input的值</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;townname&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height:35px; width:90%;border-radius:5px; border:1px solid #616161&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;code&quot;</span>:<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towncode&quot;</span>).<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="不同页面间的数据传输"><a href="#不同页面间的数据传输" class="headerlink" title="不同页面间的数据传输"></a>不同页面间的数据传输</h4><p>这个项目里前端界面间的数据传输全是这种</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location=<span class="string">&#x27;/county/selectdatecenter/?myUrl=/county/town/list&amp;dj=4&amp;startNum=0&amp;pageSize=10&amp;page=1&amp;countyid=&#x27;</span></span><br></pre></td></tr></table></figure><p>不能很好的携带数据 目前使用的方法是把需要的数值放在地址栏 然后从子界面获取</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location=<span class="string">&#x27;/county/selectdatecenter/?myUrl=/county/town/list&amp;dj=4&amp;startNum=0&amp;pageSize=10&amp;page=1&amp;countyid=&#x27;</span> + <span class="title function_">getUrlParam</span>(<span class="string">&quot;countyid&quot;</span>) +<span class="string">&quot;&amp;townsize=&quot;</span> + <span class="title function_">getUrlParam</span>(<span class="string">&quot;townsize&quot;</span>) +<span class="string">&quot;&amp;countyname=&quot;</span> + <span class="title function_">getUrlParam</span>(<span class="string">&quot;countyname&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getUrlParam</span>(<span class="params">name, url</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> u = <span class="variable language_">arguments</span>[<span class="number">1</span>] || <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>,</span><br><span class="line">        reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(^|&amp;)&quot;</span> + name + <span class="string">&quot;=([^&amp;]*)(&amp;|$)&quot;</span>),</span><br><span class="line">        r = u.<span class="title function_">substr</span>(u.<span class="title function_">indexOf</span>(<span class="string">&quot;?&quot;</span>) + <span class="number">1</span>).<span class="title function_">match</span>(reg);</span><br><span class="line">    <span class="keyword">return</span> r != <span class="literal">null</span> ? <span class="built_in">decodeURI</span>(r[<span class="number">2</span>]) : <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;弹窗&quot;&gt;&lt;a href=&quot;#弹窗&quot; class=&quot;headerlink&quot; title=&quot;弹窗&quot;&gt;&lt;/a&gt;弹窗&lt;/h4&gt;&lt;p&gt;在传统健身设备栏里 有一个展示二维码的弹窗 但是里面的按钮绑定的是生成二维码 不是展示 不清楚展示是怎么写的&lt;/p&gt;
&lt;p&gt;网络上大部分弹窗</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8830%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8830%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.643Z</published>
    <updated>2022-09-30T15:09:56.592Z</updated>
    
    <content type="html"><![CDATA[<h4 id="镇街级行政区管理"><a href="#镇街级行政区管理" class="headerlink" title="镇街级行政区管理"></a>镇街级行政区管理</h4><ol><li>新增查询成功</li><li>能够正确展示下设镇街级的数量</li><li>设置镇街跳转成功</li><li>大范围修改行政区查询语句 </li><li>设置镇街查询成功</li><li>修复管理员数据异常会无法查询的bug</li><li>新增返回按钮成功</li><li><code>街镇所属上级单位</code> 数据获取不到</li><li><code>已有街镇数 </code> 数据获取不到</li><li>镇街级编辑可用 但还不是弹窗样式</li><li>镇街级新建可用 但还不是弹窗样式</li><li>镇街级删除可用</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;镇街级行政区管理&quot;&gt;&lt;a href=&quot;#镇街级行政区管理&quot; class=&quot;headerlink&quot; title=&quot;镇街级行政区管理&quot;&gt;&lt;/a&gt;镇街级行政区管理&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;新增查询成功&lt;/li&gt;
&lt;li&gt;能够正确展示下设镇街级的数量&lt;/li&gt;
&lt;li&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8829%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8829%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.640Z</published>
    <updated>2022-09-30T01:03:35.841Z</updated>
    
    <content type="html"><![CDATA[<h4 id="镇街级筛选组件"><a href="#镇街级筛选组件" class="headerlink" title="镇街级筛选组件"></a>镇街级筛选组件</h4><p>镇街级筛选组件可以获取镇街级数据 可以正常返回镇街级id完成查询 但是无法使用全区功能</p><p>查看js组件中全城的功能 看不懂</p><p>尝试在列表前新增 控制台输出正常 但是筛选栏不显示</p><p>尝试直接修改 还是控制台输出正常 但是筛选栏不显示</p><p>暂时放弃</p><h4 id="注册时地区筛选"><a href="#注册时地区筛选" class="headerlink" title="注册时地区筛选"></a>注册时地区筛选</h4><p>管理员注册时需要选择地区 </p><p>尝试复制一个</p><p>但是本来地区选择就是不能成功的</p><p>暂时放弃</p><h4 id="镇街级行政区管理"><a href="#镇街级行政区管理" class="headerlink" title="镇街级行政区管理"></a>镇街级行政区管理</h4><p>新增查询成功</p><p>新增下设镇街级数量 获取不到想要的数据</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;镇街级筛选组件&quot;&gt;&lt;a href=&quot;#镇街级筛选组件&quot; class=&quot;headerlink&quot; title=&quot;镇街级筛选组件&quot;&gt;&lt;/a&gt;镇街级筛选组件&lt;/h4&gt;&lt;p&gt;镇街级筛选组件可以获取镇街级数据 可以正常返回镇街级id完成查询 但是无法使用全区功能&lt;/p&gt;
&lt;p</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8828%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8828%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.607Z</published>
    <updated>2022-09-29T01:31:45.791Z</updated>
    
    <content type="html"><![CDATA[<h4 id="跳过微信登录"><a href="#跳过微信登录" class="headerlink" title="跳过微信登录"></a>跳过微信登录</h4><p>按照上次的思路 准备跳过登录</p><p>先是使用debug模式查看到从session中获取的fituser是一个TSmartUserInfo类型 从中提取出信息</p><p>在拦截器前判断 如果session中没有东西 就新增一个TSmartUserInfo类放进去</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> request.getSession().getAttribute(<span class="string">&quot;fituser&quot;</span>);</span><br><span class="line"><span class="comment">//    if (user == null) &#123;</span></span><br><span class="line"><span class="comment">//       TSmartUserInfo aaa = new TSmartUserInfo();</span></span><br><span class="line"><span class="comment">//       aaa.setUnionid(&quot;oGXTW51OjRstQCUk30HIiYDPrf1g&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setApplyTime(null);</span></span><br><span class="line"><span class="comment">//       aaa.setAuditTime(null);</span></span><br><span class="line"><span class="comment">//       aaa.setHeight(&quot;300&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setWeight(&quot;40&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setSex(&quot;1&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setPower(&quot;1&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setOpenid(&quot;onSer5CtJvKQNqcq0czCk - oMuw_g&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setHeadimgurl(&quot;https://thirdwx.qlogo.cn/mmopen/vi_32/5AaWIZylfPgGSOLQG0In3RbxrUdwDlxEFLia8ytNmtRlaxsRSIgaCibJtjcotrqI2RcfWOvU29Wg6LiaMFvxCnziaw/132&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setNickName(&quot;十早九木&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setExpertName(null);</span></span><br><span class="line"><span class="comment">//       aaa.setSigncode(null);</span></span><br><span class="line"><span class="comment">//       aaa.setConsultnum(0);</span></span><br><span class="line"><span class="comment">//       aaa.setSigncodeids(null);</span></span><br><span class="line"><span class="comment">//       aaa.setGroup(null);</span></span><br><span class="line"><span class="comment">//       aaa.setField(null);</span></span><br><span class="line"><span class="comment">//       aaa.setSportEnterprise(null);</span></span><br><span class="line"><span class="comment">//       aaa.setRemarks(null);</span></span><br><span class="line"><span class="comment">//       aaa.setApprovalState(null);</span></span><br><span class="line"><span class="comment">//       aaa.setIphone(null);</span></span><br><span class="line"><span class="comment">//       aaa.setExpertphone(null);</span></span><br><span class="line"><span class="comment">//       aaa.setStartlevel(0);</span></span><br><span class="line"><span class="comment">//       aaa.setSign(null);</span></span><br><span class="line"><span class="comment">//       aaa.setStartime(&quot;2022-09-27 17:17:29&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setExpertimgurl(null);</span></span><br><span class="line"><span class="comment">//       aaa.setIdcardexpertimgurl(null);</span></span><br><span class="line"><span class="comment">//       aaa.setRname(null);</span></span><br><span class="line"><span class="comment">//       aaa.setIdcard(null);</span></span><br><span class="line"><span class="comment">//       aaa.setState(&quot;0&quot;);</span></span><br><span class="line"><span class="comment">//       aaa.setExpertlevel(null);</span></span><br><span class="line"><span class="comment">//       aaa.setCompany(null);</span></span><br><span class="line"><span class="comment">//       aaa.setFacecode(null);</span></span><br><span class="line"><span class="comment">//       aaa.setCredentialimgurl(null);</span></span><br><span class="line"><span class="comment">//       aaa.setSignnum(null);</span></span><br><span class="line"><span class="comment">//       aaa.setEnterexpertdate(null);</span></span><br><span class="line"><span class="comment">//       aaa.setFaceimage(null);</span></span><br><span class="line"><span class="comment">//       aaa.setIsadmin(null);</span></span><br><span class="line"><span class="comment">//       aaa.setSumscore(null);</span></span><br><span class="line"><span class="comment">//       aaa.setClientid(null);</span></span><br><span class="line"><span class="comment">//       aaa.setAddress(null);</span></span><br><span class="line"><span class="comment">//       aaa.setPowerName(null);</span></span><br><span class="line"><span class="comment">//       aaa.setSportWeekNum(0);</span></span><br><span class="line"><span class="comment">//       aaa.setGuo(true);</span></span><br><span class="line"><span class="comment">//       aaa.setSheng(true);</span></span><br><span class="line"><span class="comment">//       aaa.setOpenStatus(null);</span></span><br><span class="line"><span class="comment">//       request.getSession().setAttribute(&quot;fituser&quot;, aaa);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    user = request.getSession().getAttribute(&quot;fituser&quot;);</span></span><br><span class="line">      <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">         request.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;无权限请先登录&quot;</span>);</span><br><span class="line">         request.getRequestDispatcher(<span class="string">&quot;/usersmart/login&quot;</span>).forward(request, response);</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         request.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">         <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ok&quot;</span>);</span><br><span class="line">         response.addCookie(cookie);</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>这样确实能跳过登录 但是还是有一个问题 似乎是因为拦截器 被修改了 所以地址栏后面会新增<code>#menu0</code> 导致无法正常访问</p><p>尝试失败 不再尝试</p><h4 id="跳转"><a href="#跳转" class="headerlink" title="跳转"></a>跳转</h4><p>猜猜不能使用<a href="http://www.zhjsy.fit是因为走了https协议/">www.zhjsy.fit是因为走了https协议</a> 而浏览器总是默认走这个协议 </p><p>在浏览器设置里取消了这个域名的默认https</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome://net-internals/#hsts</span><br></pre></td></tr></table></figure><p>现在访问这个域名<a href="http://www.zhjsy.fit,默认走http协议/">www.zhjsy.fit，默认走http协议</a> 会使用本地后台</p><h4 id="需求101"><a href="#需求101" class="headerlink" title="需求101"></a>需求101</h4><p>如果该区域下有健身园 就会出现健身园筛选项 </p><blockquote><p>把这个健身园筛选项给去掉，其本身也没有实际作用。-宋志文2022.09.23</p></blockquote><p>已经删除了前端的筛选项功能</p><h4 id="自动编排功能"><a href="#自动编排功能" class="headerlink" title="自动编排功能"></a>自动编排功能</h4><p>经测试能自动修改状态 暂时不清楚什么是编排功能</p><h4 id="五级管理相关的内容"><a href="#五级管理相关的内容" class="headerlink" title="五级管理相关的内容"></a>五级管理相关的内容</h4><p>原有功能是有个country表 存放着地区关系</p><p>现在新增一级 依附于区县级下面 flied表依附于新的镇街级</p><h5 id="筛选组件"><a href="#筛选组件" class="headerlink" title="筛选组件"></a>筛选组件</h5><p>控制台输出发现是返回了一个列表嵌套 可以通过<code>.</code>获取下级列表 通过关系能看到新增的镇街级已经被自动设置为4级列表 可以获取到数据</p><p>不断修改后可以从组件获取到正常关系和数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> allDistric = [];</span><br><span class="line"><span class="keyword">var</span> selectedProvince = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedCity = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedDistric = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedTown = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedArea = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedProvinceIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> selectedCityIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> selectedDistricIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> selectedTownIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> selectedAreaIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> selectedProvinceId = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedCityId = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedDistricId = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedTownId = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> selectedAreaId = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changedProvince</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">    selectedProvince = e</span><br><span class="line">    selectedCity = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedDistric = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedCityIndex = <span class="number">0</span>;</span><br><span class="line">    selectedDistricIndex = <span class="number">0</span>;</span><br><span class="line">    selectedCityId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedDistricId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedTown = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedTownIndex = <span class="number">0</span>;</span><br><span class="line">    selectedTownId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> parentlist = allDistric</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; parentlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e == parentlist[i].<span class="property">name</span>) &#123;</span><br><span class="line">            selectedProvinceId = parentlist[i].<span class="property">id</span></span><br><span class="line">            selectedProvinceIndex = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&quot;#provinces&quot;</span>)[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;citys&quot;</span>)) &#123;</span><br><span class="line">        <span class="title function_">doFinishSelect</span>();</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;citys&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;districs&quot;</span>)) <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;districs&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>)) <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;areas&quot;</span>)) <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;areas&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (allDistric[selectedProvinceIndex] &amp;&amp; allDistric[selectedProvinceIndex].<span class="property">children</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> newlist = allDistric[selectedProvinceIndex].<span class="property">children</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;newList=&gt;&quot;</span>, newlist)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            $(<span class="string">&quot;#citys&quot;</span>)[<span class="number">0</span>].<span class="property">options</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Option</span>(newlist[i].<span class="property">name</span>, newlist[i].<span class="property">name</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//selectedCity = newlist[0].name;</span></span><br><span class="line">        <span class="comment">//selectedCityIndex = 0</span></span><br><span class="line">        <span class="keyword">if</span> (newlist[<span class="number">0</span>]) <span class="title function_">changedCity</span>(newlist[<span class="number">0</span>].<span class="property">name</span>)</span><br><span class="line">        <span class="title function_">renderForm</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// backp(selectedProvinceId)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changedCity</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    selectedCity = e</span><br><span class="line">    selectedDistric = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedDistricIndex = <span class="number">0</span>;</span><br><span class="line">    selectedDistricId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedTown = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedTownIndex = <span class="number">0</span>;</span><br><span class="line">    selectedTownId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> parentlist = allDistric[selectedProvinceIndex].<span class="property">children</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; parentlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e == parentlist[i].<span class="property">name</span>) &#123;</span><br><span class="line">            selectedCityId = parentlist[i].<span class="property">id</span></span><br><span class="line">            selectedCityIndex = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;districs&quot;</span>)) &#123;</span><br><span class="line">        <span class="title function_">doFinishSelect</span>();</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;districs&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>)) <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;areas&quot;</span>)) <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;areas&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex] &amp;&amp; allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> newlist = allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            $(<span class="string">&quot;#districs&quot;</span>)[<span class="number">0</span>].<span class="property">options</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Option</span>(newlist[i].<span class="property">name</span>, newlist[i].<span class="property">name</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newlist[<span class="number">0</span>]) <span class="title function_">changedDistric</span>(newlist[<span class="number">0</span>].<span class="property">name</span>)</span><br><span class="line">        <span class="title function_">renderForm</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changedDistric</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    selectedDistric = e</span><br><span class="line">    selectedTown = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    selectedTownIndex = <span class="number">0</span>;</span><br><span class="line">    selectedTownId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> parentlist = allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; parentlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e == parentlist[i].<span class="property">name</span>) &#123;</span><br><span class="line">            selectedDistricId = parentlist[i].<span class="property">id</span></span><br><span class="line"></span><br><span class="line">            selectedDistricIndex = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>)) &#123;</span><br><span class="line">        <span class="title function_">doFinishSelect</span>();</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>)) <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;towns&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex] &amp;&amp; allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> newlist = allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            $(<span class="string">&quot;#towns&quot;</span>)[<span class="number">0</span>].<span class="property">options</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Option</span>(newlist[i].<span class="property">name</span>, newlist[i].<span class="property">name</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newlist[<span class="number">0</span>]) <span class="title function_">changedTown</span>(newlist[<span class="number">0</span>].<span class="property">name</span>)</span><br><span class="line">        <span class="title function_">renderForm</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changedTown</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    selectedTown = e</span><br><span class="line">    <span class="keyword">var</span> parentlist = allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(allDistric[selectedProvinceIndex])</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; parentlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e == parentlist[i].<span class="property">name</span>) &#123;</span><br><span class="line">            selectedTownId = parentlist[i].<span class="property">id</span></span><br><span class="line">            selectedTownIndex = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;areas&quot;</span>)) &#123;</span><br><span class="line">        <span class="title function_">doFinishSelect</span>();</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;areas&quot;</span>).<span class="property">options</span>.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>[selectedTownIndex] &amp;&amp; allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>[selectedTownIndex].<span class="property">children</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> newlist = allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>[selectedTownIndex].<span class="property">children</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; newlist.<span class="property">length</span>; i++) &#123;</span><br><span class="line">            $(<span class="string">&quot;#areas&quot;</span>)[<span class="number">0</span>].<span class="property">options</span>.<span class="title function_">add</span>(<span class="keyword">new</span> <span class="title class_">Option</span>(newlist[i].<span class="property">name</span>, newlist[i].<span class="property">name</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (newlist[<span class="number">0</span>]) <span class="title function_">changedArea</span>(newlist[<span class="number">0</span>].<span class="property">name</span>)</span><br><span class="line">        <span class="title function_">renderForm</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changedArea</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    selectedArea = e</span><br><span class="line">    <span class="keyword">var</span> parentlist = allDistric[selectedProvinceIndex].<span class="property">children</span>[selectedCityIndex].<span class="property">children</span>[selectedDistricIndex].<span class="property">children</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; allDistric.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e == allDistric[i].<span class="property">name</span>) &#123;</span><br><span class="line">            selectedAreaId = parentlist[i].<span class="property">id</span></span><br><span class="line">            selectedAreaIndex = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">doFinishSelect</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; justify-content: row;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;管理员昵称&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px; height: 40px; padding: 10px&quot;</span> <span class="attr">id</span>=<span class="string">&quot;findname&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;name?default(&quot;</span>&quot;)&#125;&quot;&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0px 0 0 30px;display: flex; justify-content: row; &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm mb-3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;provinces&quot;</span> <span class="attr">value</span>=<span class="string">&quot;selectedProvince&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">onchange</span>=<span class="string">&quot;changedProvince(this.value)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0px 0 0 30px;display: flex; justify-content: row;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm mb-3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;citys&quot;</span> <span class="attr">value</span>=<span class="string">&quot;selectedCity&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">onchange</span>=<span class="string">&quot;changedCity(this.value)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0px 0 0 30px;display: flex; justify-content: row;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;span style=&quot;width: 102px&quot;&gt;区/县：&lt;/span&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm mb-3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;districs&quot;</span> <span class="attr">value</span>=<span class="string">&quot;selectedDistric&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">onchange</span>=<span class="string">&quot;changedDistric(this.value)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-input-block&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0px 0 0 30px;display: flex; justify-content: row;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm mb-3&quot;</span> <span class="attr">id</span>=<span class="string">&quot;towns&quot;</span> <span class="attr">value</span>=<span class="string">&quot;selectedTown&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">onchange</span>=<span class="string">&quot;changedTown(this.value)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0px 100px 0 20px; width: 75px;height: 40px&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">onclick</span>=<span class="string">&quot;find()&quot;</span>&gt;</span>查找<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;跳过微信登录&quot;&gt;&lt;a href=&quot;#跳过微信登录&quot; class=&quot;headerlink&quot; title=&quot;跳过微信登录&quot;&gt;&lt;/a&gt;跳过微信登录&lt;/h4&gt;&lt;p&gt;按照上次的思路 准备跳过登录&lt;/p&gt;
&lt;p&gt;先是使用debug模式查看到从session中获取的fituse</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8827%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8827%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.594Z</published>
    <updated>2022-09-28T00:56:45.381Z</updated>
    
    <content type="html"><![CDATA[<h3 id="本地运行健身园项目"><a href="#本地运行健身园项目" class="headerlink" title="本地运行健身园项目"></a>本地运行健身园项目</h3><h4 id="思路一："><a href="#思路一：" class="headerlink" title="思路一："></a>思路一：</h4><p>修改二维码之后的跳转 但是祝哥说这个跳转是微信那边设置的 无法修改</p><h4 id="思路二："><a href="#思路二：" class="headerlink" title="思路二："></a>思路二：</h4><p>修改登录跳转连接 让他不跳转到微信登录 直接跳转到其他的登录接口 但是这样过于复杂</p><h4 id="思路三："><a href="#思路三：" class="headerlink" title="思路三："></a>思路三：</h4><p>需要登录是因为后端有一个拦截器 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> request.getSession().getAttribute(<span class="string">&quot;fituser&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;无权限请先登录&quot;</span>);</span><br><span class="line">    request.getRequestDispatcher(<span class="string">&quot;/usersmart/login&quot;</span>).forward(request, response);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    request.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ok&quot;</span>);</span><br><span class="line">    response.addCookie(cookie);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>登录需要这个user 那这个类里面是什么内容呢 尝试使用debug获取 但是扫描完二维码登录之后就跳转到公网后台了 本地无法获取</p><h4 id="思路四："><a href="#思路四：" class="headerlink" title="思路四："></a>思路四：</h4><p>修改hosts 每次登录后都会跳转到公网 如果我们把公网ip对应到本地ip 是不是就能让他使用本地后端</p><p>修改后端程序端口为80 修改hosts</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 www.zhjsy.fit</span><br></pre></td></tr></table></figure><p>修改后终于访问本地了 但是不知为什么提示我我不是管理员账户</p><p>这时候祝哥使用这种办法成功了 这就说明这种办法是可以的 </p><p>想到事前工作区的问题 重新构建了代码运行 然后重启了浏览器 也成功了</p><h4 id="思路五："><a href="#思路五：" class="headerlink" title="思路五："></a>思路五：</h4><p>每次修改代码 都需要重启项目 每次都需要重新扫码登录 过于复杂</p><p>既然已经可以使用本地 也就可以重启思路三 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;本地运行健身园项目&quot;&gt;&lt;a href=&quot;#本地运行健身园项目&quot; class=&quot;headerlink&quot; title=&quot;本地运行健身园项目&quot;&gt;&lt;/a&gt;本地运行健身园项目&lt;/h3&gt;&lt;h4 id=&quot;思路一：&quot;&gt;&lt;a href=&quot;#思路一：&quot; class=&quot;headerli</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8826%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8826%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.568Z</published>
    <updated>2022-09-27T01:01:34.826Z</updated>
    
    <content type="html"><![CDATA[<h4 id="运行新的TimeBank"><a href="#运行新的TimeBank" class="headerlink" title="运行新的TimeBank"></a>运行新的TimeBank</h4><p>首先是<a href="https://svnbucket.com/posts/download-install-svn/">下载和安装</a></p><p>svn是中心化的版本控制工具 首先先找崔总要到了账号密码</p><p>第一次下载不清楚目录下载了所有东西 发现不对后立即终止</p><p><a href="https://blog.csdn.net/weixin_46594796/article/details/118440067?ops_request_misc=%7B%22request_id%22:%22166415386416782395337991%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=166415386416782395337991&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-118440067-null-null.142%5Ev50%5Epc_rank_34_2,201%5Ev3%5Eadd_ask&utm_term=svn&spm=1018.2226.3001.4187">了解</a>如何下载部分项目</p><p>下载完成后发现maven有问题</p><p>找了<a href="https://zhuanlan.zhihu.com/p/144220746">教程</a>说是要安装mvn</p><p>安装完查看mvn版本的时候发现不能识别</p><p>搜索后原来是mvn命令需要管理员的命令提示行 idea默认的终端不是管理员命令行</p><p>对照<a href="https://blog.csdn.net/muzi_87/article/details/125823287">教程</a>修改</p><p>因为群里说要使用本地mvn 修改了mvn地址</p><p>再次启动提示版本问题 又安装了3.5.3版本</p><p>mvn不再报错 提示包有问题</p><p>修改类名 能正常启动<a href="http://localhost:9082/swagger-ui/index.html">localhost</a></p><p><strong>帮助翟梦云解决问题失败 但是在何鑫那里成功了 然后祝君那里也失败了</strong></p><h4 id="运行健身园项目"><a href="#运行健身园项目" class="headerlink" title="运行健身园项目"></a>运行健身园项目</h4><p>下午开始看健身园项目</p><p>开始是提示maven问题 总是找不到<code>cn.crazyasp</code>下的包</p><p>一番折腾发现似乎是maven包版本的问题 有几个方法我本地的包没有</p><p>对照局域网maven库 修改了maven引用</p><p>多次修改后 包不报错了 可以直接启动而不会提示找不到包了</p><p>现在开始报这个错误</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[ost-startStop-1] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: </span><br><span class="line">org.springframework.beans.factory.BeanCreationException. Message: Error creating bean with name </span><br><span class="line">&#x27;servletEndpointRegistrar&#x27; defined in class path resource </span><br><span class="line">[org/springframework/boot/actuate/autoconfigure/endpoint/web/ServletEndpointManagementContextConfiguration$WebMv</span><br><span class="line">cServletEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception </span><br><span class="line">is org.springframework.beans.BeanInstantiationException: Failed to instantiate </span><br><span class="line">[org.springframework.boot.actuate.endpoint.web.ServletEndpointRegistrar]: Factory method &#x27;servletEndpointRegistrar&#x27; </span><br><span class="line">threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with </span><br><span class="line">name &#x27;healthEndpoint&#x27; defined in class path resource </span><br></pre></td></tr></table></figure><p>我想Tomcat怎么可能会出错呢</p><p>下面还有一段报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"> </span><br><span class="line">Description:</span><br><span class="line"> </span><br><span class="line">Failed to configure a DataSource: &#x27;url&#x27; attribute is not specified and no embedded datasource could be configured.</span><br><span class="line"> </span><br><span class="line">Reason: Failed to determine a suitable driver class</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">Action:</span><br><span class="line"> </span><br><span class="line">Consider the following:</span><br><span class="line">    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.</span><br><span class="line">    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).</span><br></pre></td></tr></table></figure><p>按照这个<a href="https://blog.csdn.net/renkai721/article/details/112257894">方法</a>，其中所有的方法都试了一遍都不能成功</p><p>最后祝哥让新建一个maven 结果还是不成功</p><p>最后祝哥说可能是工作区的问题 而我也好像确实有一次打开项目时手快没有选择新窗口打开 果然最后成功了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;运行新的TimeBank&quot;&gt;&lt;a href=&quot;#运行新的TimeBank&quot; class=&quot;headerlink&quot; title=&quot;运行新的TimeBank&quot;&gt;&lt;/a&gt;运行新的TimeBank&lt;/h4&gt;&lt;p&gt;首先是&lt;a href=&quot;https://svnbucket.</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8823%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8823%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.557Z</published>
    <updated>2022-09-23T13:15:14.382Z</updated>
    
    <content type="html"><![CDATA[<h4 id="服务详情所需字段"><a href="#服务详情所需字段" class="headerlink" title="服务详情所需字段"></a>服务详情所需字段</h4><p>服务详情与需求详情不同 新增了几个字段</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer propleNumber;<span class="comment">//服务人数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer propleNum;<span class="comment">//现有人数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String inTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String countryId;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String serviceTypeStr;</span><br></pre></td></tr></table></figure><h4 id="服务-x2F-需求详情详细地址"><a href="#服务-x2F-需求详情详细地址" class="headerlink" title="服务&#x2F;需求详情详细地址"></a>服务&#x2F;需求详情详细地址</h4><p>这一栏要求显示在一行 但是第一次的需求没有说要有tooltip提示</p><p>尝试写没有提示的</p><p>单行显示成功 省略号成功 问题出现在不能和之前的文字显示在一行里 因为用的css样式<code>-webkit-box</code>就不允许</p><p>想试试获取dom元素计算表格长度决定一共显示多少文字 元素能获取 能计算 问题出现在不能异步！</p><p>换思路 把一行定义为一共大的标签 这一个标签有单行限制 超出省略号 然后在单独为详细地址添加tooltip提示</p><h4 id="公益人员详情-平均星级"><a href="#公益人员详情-平均星级" class="headerlink" title="公益人员详情 平均星级"></a>公益人员详情 平均星级</h4><p>之前留意过 <code>fit_xdl_order_form_comment</code>表中是存储了所有的评价的 那么只需要按照id查找到这个用户收到的所有评价 遍历出所有评价的星级 相加后处以数量就能得到对应的平均星级</p><p>正好宋经理的需求是不满5星就按照四星算 而java的<code>/</code>运算符正好是这个性质 不保留余数</p><p><strong>没有收到过评价的按照0星计算</strong></p><h4 id="需求详情时间线"><a href="#需求详情时间线" class="headerlink" title="需求详情时间线"></a>需求详情时间线</h4><p>按照李哥的思路是全部重写 但是今天再次商量过后只准备新增一个表 但是即使这样工作量还是很大 需要对每一个涉及到更改订单状态的接口进行修改</p><p>又因为之前的设计思路是一个需求只有一个订单 所以不能按照之前的思路多订单匹配 准备再表里新增几个字段 把修改人 服务者和被服务者也新增进去 </p><p>同时为了保证扩展性和为了能适配服务的多订单模式 外键仍然使用orderid</p><p>暂时只完成了发布 发布者取消订单 接取订单三个状态</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;服务详情所需字段&quot;&gt;&lt;a href=&quot;#服务详情所需字段&quot; class=&quot;headerlink&quot; title=&quot;服务详情所需字段&quot;&gt;&lt;/a&gt;服务详情所需字段&lt;/h4&gt;&lt;p&gt;服务详情与需求详情不同 新增了几个字段&lt;/p&gt;
&lt;figure class=&quot;highlig</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8822%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8822%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.539Z</published>
    <updated>2022-09-23T01:18:12.379Z</updated>
    
    <content type="html"><![CDATA[<h4 id="hibernate下sql原生查询并取出没有对应实体的object的值"><a href="#hibernate下sql原生查询并取出没有对应实体的object的值" class="headerlink" title="hibernate下sql原生查询并取出没有对应实体的object的值"></a>hibernate下sql原生查询并取出没有对应实体的object的值</h4><p>参考<a href="https://blog.csdn.net/qq_31678877/article/details/52935942">这篇文章</a></p><p>这篇文章给了一个很好的思路 不再是类型的强转互转 而是把这个object转换成object[]列表 再由列表中获取值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> String.valueOf(((Object[]) <span class="built_in">this</span>.getOption().getSession().createNativeQuery(hqlOrderComment).getResultList().get(<span class="number">0</span>))[<span class="number">11</span>]);</span><br></pre></td></tr></table></figure><h4 id="app无法查询"><a href="#app无法查询" class="headerlink" title="app无法查询"></a>app无法查询</h4><p>在帮忙解决公益人员信息没有距离的过程中 发现我本地的大部分app查询都查不到数据了  而云端的后端是可以的 判断为我的修改导致的 </p><p>再次观察发现是之前对需求表进行修改新增了countryid字段 与country类重复 </p><p>删除countryid字段 把需要用到的字段修改为country类里的id字段代替</p><h4 id="公益人员信息没有距离"><a href="#公益人员信息没有距离" class="headerlink" title="公益人员信息没有距离"></a>公益人员信息没有距离</h4><p>发现是当时写这个接口是后端就没有接收经纬度字段 自然没法计算距离 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 查询这个用户的经纬度</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">public</span> Geometry <span class="title function_">findUserLocationById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">String</span> <span class="variable">hql</span> <span class="operator">=</span> <span class="string">&quot;select t.location  from fit.xdl.timebank.user.TBankUser as t where t.dropData = false and t.id = &quot;</span>+id;</span><br><span class="line"><span class="keyword">return</span> (Geometry) <span class="built_in">this</span>.uniqueResult(hql);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Geometry</span> <span class="variable">location</span> <span class="operator">=</span> localOption.findUserLocationById(findPersonnelDetails.getId());</span><br><span class="line"><span class="keyword">if</span> (location!=<span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">longitude1</span> <span class="operator">=</span> location.getInteriorPoint().getX();</span><br><span class="line">    <span class="type">double</span> <span class="variable">latitude1</span> <span class="operator">=</span> location.getInteriorPoint().getY();</span><br><span class="line">    <span class="type">GlobalCoordinates</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalCoordinates</span>(longitude1, latitude1);</span><br><span class="line">    <span class="type">GlobalCoordinates</span> <span class="variable">source1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GlobalCoordinates</span>(longitude, latitude);</span><br><span class="line">    <span class="type">double</span> <span class="variable">meter1</span> <span class="operator">=</span> getDistanceMeter(source, source1, Ellipsoid.Sphere);</span><br><span class="line">    <span class="type">long</span> <span class="variable">distance</span> <span class="operator">=</span> Math.round(meter1 / <span class="number">1000</span>);</span><br><span class="line">    findPersonnelDetails.setDistance(distance);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="服务详情"><a href="#服务详情" class="headerlink" title="服务详情"></a>服务详情</h4><p>按照新的数据库设计 订单详情什么的应该是在一起的  所以时间线功能是不需要修改的</p><p>需要修改的只有上面的详情块部分</p><p>在返回类新增字段完成需求</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">t.setInTime((getDateTimeStr(s.getInTime())));</span><br><span class="line">t.setPhone(s.getUser().getPhone());</span><br><span class="line">t.setCountryId(getAddress(s.getCountry().getId()));</span><br><span class="line"><span class="keyword">if</span> (s.getThisServiceType() != <span class="literal">null</span>) &#123;</span><br><span class="line">    t.setServiceTypeStr(s.getThisServiceType().replace(<span class="string">&#x27;&amp;&#x27;</span>,<span class="string">&#x27;-&#x27;</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    t.setServiceTypeStr(<span class="string">&quot;未设置类型&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer propleNumber;<span class="comment">//服务人数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer propleNum;<span class="comment">//现有人数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String inTime;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String phone;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String countryId;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String serviceTypeStr;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;hibernate下sql原生查询并取出没有对应实体的object的值&quot;&gt;&lt;a href=&quot;#hibernate下sql原生查询并取出没有对应实体的object的值&quot; class=&quot;headerlink&quot; title=&quot;hibernate下sql原生查询并取出没有</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8821%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8821%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.520Z</published>
    <updated>2022-09-22T01:17:05.789Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求订单"><a href="#需求订单" class="headerlink" title="需求订单"></a>需求订单</h3><h4 id="订单表查询"><a href="#订单表查询" class="headerlink" title="订单表查询"></a>订单表查询</h4><p>在执行count语句时报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select 0 from sport_bank_order as t where t.drop_data = 0</span><br></pre></td></tr></table></figure><p>因为count语句都需要对实体表查询 我为了能减少重复的条件语句使用的原生sql 是在原有sql基础上获得size来完成count的效果</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> Long.valueOf(<span class="built_in">this</span>.getOption().getSession().createNativeQuery(hqlBankOrderCount, BankOrder.class).getResultList().size());</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>报错</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">09</span>:<span class="number">15</span>:<span class="number">13.000</span> [<span class="type">http</span>-<span class="type">nio</span>-<span class="number">9082</span>-<span class="type">exec</span>-<span class="number">1</span>] WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: <span class="number">0</span>, SQLState: S0022</span><br><span class="line"><span class="number">09</span>:<span class="number">15</span>:<span class="number">13.000</span> [<span class="type">http</span>-<span class="type">nio</span>-<span class="number">9082</span>-<span class="type">exec</span>-<span class="number">1</span>] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Column <span class="string">&#x27;id&#x27;</span> not found.</span><br><span class="line"><span class="number">09</span>:<span class="number">15</span>:<span class="number">13.014</span> [<span class="type">http</span>-<span class="type">nio</span>-<span class="number">9082</span>-<span class="type">exec</span>-<span class="number">1</span>] WARN  fit.xdl.timebank.handler.SportBankExceptionHandler - 异常起始时间 =&gt; <span class="number">2022</span><span class="literal">-09-21</span> <span class="number">09</span>:<span class="number">15</span>:<span class="number">13</span></span><br><span class="line">org.springframework.dao.InvalidDataAccessResourceUsageException: could not execute query; SQL [ <span class="type">select</span> <span class="number">0</span> <span class="type">from</span> <span class="type">sport_bank_order</span> <span class="type">as</span> <span class="type">t</span> <span class="type">where</span> <span class="type">t.drop_data</span> = <span class="number">0</span>]; nested exception is org.hibernate.exception.SQLGrammarException: could not execute query</span><br></pre></td></tr></table></figure><p>提示id字段有问题 猜测可能是id字段主键等原因不能不存在 修改select 0 为select id</p><p>成功 能够查询</p><h4 id="时间线"><a href="#时间线" class="headerlink" title="时间线"></a>时间线</h4><p>时间线功能中对于不同用户的订单怎么结合到一起 怎么把所有的用户信息组合起来</p><p>首先只要需求被发布了 那么在demand表中就存在发布人的信息 发布者只能有一个 这个是固定的</p><p>然后确定的是只要订单被创建了 不管是什么状态 那么在order表中就会存在接单人的信息</p><p>问题是在一个需求被反复接单时 为了减少sql查询的次数 对于多个接单用户信息 怎么存贮 </p><p>目前想法是创建一个表或者类 用订单id作为主键 存储用户信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from fit.xdl.timebank.orderform.BankOrder as t where t.dropData = false and t.demandId</span><br><span class="line">from fit.xdl.timebank.user.TBankUser as t where t.dropData = false and t.id =</span><br></pre></td></tr></table></figure><p>首先是查询这一个订单有多少个接单者 然后从获得的id查询这些接单者的信息</p><p>最后使用map类型 用orderid做主键 存贮一个tbuser类型</p><p>编写中发现实际上我们只需要nickname和phone两个值 而且这两个值总是会组成一个固定的句式 所以直接把这两个值组合成一句话返回</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, String&gt;();</span><br><span class="line"><span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;用户\&quot;&quot;</span> + spanColor(tempUserList.getNickName()) + <span class="string">&quot;（手机号&quot;</span> + spanColor(tempUserList.getPhone()) + <span class="string">&quot;）\&quot;&quot;</span>;</span><br><span class="line">map.put(String.valueOf(tempOrderList.get(i).getOrderCode()),user);</span><br></pre></td></tr></table></figure><p>在整个时间线中 除了接单者的信息是变量 还有服务预计开始时间、发布者信息、评价等信息，其中服务预计开始时间和发布者信息是固定的，只要订单创建就会存在 所以这两个值的获取可以写在<code>BeanUtils.copyPropertiesByCollection()</code>的外面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">hqlDemand</span> <span class="operator">=</span> <span class="string">&quot; from fit.xdl.timebank.demand.BankDemand as t where t.id =&quot;</span> + demandId;</span><br><span class="line"><span class="type">String</span> <span class="variable">sqlTbuser</span> <span class="operator">=</span> <span class="string">&quot; from fit.xdl.timebank.user.TBankUser as t where t.dropData = false and t.id =&quot;</span> + id;</span><br></pre></td></tr></table></figure><p>在这之后 在服务完成的时候 还有一个实际服务时间这里需要两个值，一个是实际开始时间 一个是实际结束时间，实际开始时间准备从订单变化表中服务状态变更为已开始服务的时间，服务结束时间就是当前这一条服务结束状态更改的时间，使用工具类中的<code>getTimeMoneyDate()</code>计算时间差</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sqlOrderChange</span> <span class="operator">=</span> <span class="string">&quot; from fit.xdl.timebank.orderform.BankOrderChange as t where t.dropData = false and t.orderChangeState = 7 and t.orderId = &quot;</span> + orderId;</span><br></pre></td></tr></table></figure><p>然后是生成的时间币 在询问宋经理后得知计算规则没这么简单 干脆不自己计算 直接从交易记录里获取 但是由于数据库外键索引之类的问题暂时无法获取 评价也是暂时无法获取</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求订单&quot;&gt;&lt;a href=&quot;#需求订单&quot; class=&quot;headerlink&quot; title=&quot;需求订单&quot;&gt;&lt;/a&gt;需求订单&lt;/h3&gt;&lt;h4 id=&quot;订单表查询&quot;&gt;&lt;a href=&quot;#订单表查询&quot; class=&quot;headerlink&quot; title=&quot;订单表查询&quot;&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8820%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8820%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.506Z</published>
    <updated>2022-09-20T10:54:40.618Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求订单"><a href="#需求订单" class="headerlink" title="需求订单"></a>需求订单</h3><h4 id="需求全过程"><a href="#需求全过程" class="headerlink" title="需求全过程"></a>需求全过程</h4><p>首先明白一个过程</p><p>发布者发布需求 是在sport_bank_demand表中</p><p>接取者接取了需求 是在sport_bank_order表中</p><p>订单状态发生改变的过程 是在sport_bank_order_state_change表中</p><p>其中需求表和订单表通过需求id关联 </p><p>订单表与变化表通过订单id关联</p><p>还有一个评价表 也需要与订单表相关联</p><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>查询界面需要对需求demand和用户tbuser表关联查询 返回一个需求的基本信息</p><h4 id="详情"><a href="#详情" class="headerlink" title="详情"></a>详情</h4><p>详情的上半部分只是需求的详情 所以也只需要需求demand和用户tbuser表</p><h4 id="时间线"><a href="#时间线" class="headerlink" title="时间线"></a>时间线</h4><p>时间线比较复杂</p><p>先说较简单的需求的时间线 </p><p>除了需求demand和用户tbuser表 还加入了上面提到的变化change表和评价comment表</p><p>时间线的<strong>不同状态</strong>对应不同的content语句 这一段用大量的case语句可以解决</p><p><strong>查询方式</strong> 是分需求查询还是分订单查询是一个问题 这关系到时间线的写法 同时还关系到服务订单的适配性写法</p><p><strong>多用户</strong>是一个稍微复杂的问题 一个需求可以被接取再背取消在被接取 其中接取和取消的部分会不会重复  仔细研究发现是我想多了  其实多个订单的详细记录只有创建部分是重复的 结束部分不会重复 而重复的订单创建部分可以在创建的时候加一个小查询防止重复添加创建状态</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求订单&quot;&gt;&lt;a href=&quot;#需求订单&quot; class=&quot;headerlink&quot; title=&quot;需求订单&quot;&gt;&lt;/a&gt;需求订单&lt;/h3&gt;&lt;h4 id=&quot;需求全过程&quot;&gt;&lt;a href=&quot;#需求全过程&quot; class=&quot;headerlink&quot; title=&quot;需求全过程&quot;&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8819%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8819%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.485Z</published>
    <updated>2022-09-20T01:20:48.817Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求详情"><a href="#需求详情" class="headerlink" title="需求详情"></a>需求详情</h3><h4 id="过程记录"><a href="#过程记录" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="状态代码"><a href="#状态代码" class="headerlink" title="状态代码"></a>状态代码</h5><table><thead><tr><th>0</th><th>创建</th></tr></thead><tbody><tr><td>1</td><td>已失效</td></tr><tr><td>2</td><td>未失效</td></tr><tr><td>3</td><td>已被接取</td></tr><tr><td>4</td><td>发布者手动取消</td></tr><tr><td>5</td><td>接取者手动取消</td></tr><tr><td>6</td><td>超时自动取消</td></tr><tr><td>7</td><td>已开始服务</td></tr><tr><td>8</td><td>手动结束服务</td></tr><tr><td>9</td><td>超时自动结束服务</td></tr><tr><td>10</td><td>手动评价</td></tr><tr><td>11</td><td>超时自动评价</td></tr><tr><td>12</td><td>已完成</td></tr></tbody></table><h5 id="时间线"><a href="#时间线" class="headerlink" title="时间线"></a>时间线</h5><p>修改失效样式与取消分开 方便编写</p><p>全部case 应付各种情况</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;TimeLineVo&gt; <span class="title function_">getTimeLineVo</span><span class="params">(List&lt;BankOrderChange&gt; resultList)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> BeanUtils.copyPropertiesByCollection(</span><br><span class="line">      resultList, TimeLineVo::<span class="keyword">new</span>, (s,t) -&gt; &#123;</span><br><span class="line">         <span class="keyword">switch</span> (s.getOrderChangeState()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:<span class="comment">//创建</span></span><br><span class="line">               System.out.println(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">               t.setContent(<span class="string">&quot;创建&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//已失效</span></span><br><span class="line">               System.out.println(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">timestamp1</span> <span class="operator">=</span> <span class="string">&quot;2022.08.26 13:50&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;该需求过了服务开始时间(&quot;</span> + spanColor(timestamp1) + <span class="string">&quot;)且没有人接单，已变为失效状态。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:<span class="comment">//未失效</span></span><br><span class="line">               System.out.println(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">timestamp2</span> <span class="operator">=</span> <span class="string">&quot;2022.08.26 13:50&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;该需求未到开始服务时间(&quot;</span> + spanColor(timestamp2) + <span class="string">&quot;)，可再次被接单。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">//已被接取</span></span><br><span class="line">               System.out.println(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserName3</span> <span class="operator">=</span> <span class="string">&quot;动动君&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserPhone3</span> <span class="operator">=</span> <span class="string">&quot;18522971450&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;用户\&quot;&quot;</span> + spanColor(serviceuserName3) + <span class="string">&quot;（手机号&quot;</span> + spanColor(serviceuserPhone3) + <span class="string">&quot;）\&quot;接取了该需求。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:<span class="comment">//发布者手动取消</span></span><br><span class="line">               System.out.println(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserName4</span> <span class="operator">=</span> <span class="string">&quot;阿文·仁衢&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserPhone4</span> <span class="operator">=</span> <span class="string">&quot;13702173499&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;发布者\&quot;&quot;</span> + spanColor(toserviceuserName4) + <span class="string">&quot;（手机号&quot;</span> + spanColor(toserviceuserPhone4) + <span class="string">&quot;）\&quot;取消了该需求，该需求变为已取消状态。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>:<span class="comment">//接取者手动取消</span></span><br><span class="line">               System.out.println(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserName5</span> <span class="operator">=</span> <span class="string">&quot;动动君&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserPhone5</span> <span class="operator">=</span> <span class="string">&quot;18522971450&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;用户\&quot;&quot;</span> + spanColor(serviceuserName5) + <span class="string">&quot;（手机号&quot;</span> + spanColor(serviceuserPhone5) + <span class="string">&quot;）\&quot;取消了接取该需求，该需求变为已取消状态。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">6</span>:<span class="comment">//超时自动取消</span></span><br><span class="line">               System.out.println(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">timestamp4</span> <span class="operator">=</span> <span class="string">&quot;2022.08.26 13:50&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;该需求在过了服务开始时间(&quot;</span> + spanColor(timestamp4) + <span class="string">&quot;)24小时内未开始服务，因此已变为取消状态。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">7</span>:<span class="comment">//已开始服务</span></span><br><span class="line">               System.out.println(<span class="string">&quot;7&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserName7</span> <span class="operator">=</span> <span class="string">&quot;阿文·仁衢&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserPhone7</span> <span class="operator">=</span> <span class="string">&quot;13702173499&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserName7</span> <span class="operator">=</span> <span class="string">&quot;动动君&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserPhone7</span> <span class="operator">=</span> <span class="string">&quot;18522971450&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;发布者\&quot;&quot;</span> + spanColor(toserviceuserName7) + <span class="string">&quot;（手机号&quot;</span> + spanColor(toserviceuserPhone7) + <span class="string">&quot;）\&quot;已经和接单用户\&quot;&quot;</span> + spanColor(serviceuserName7) + <span class="string">&quot;（手机号&quot;</span> + spanColor(serviceuserPhone7) + <span class="string">&quot;）\&quot;开始了服务。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">8</span>:<span class="comment">//手动结束服务</span></span><br><span class="line">               System.out.println(<span class="string">&quot;8&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserName8</span> <span class="operator">=</span> <span class="string">&quot;阿文·仁衢&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserPhone8</span> <span class="operator">=</span> <span class="string">&quot;13702173499&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserName8</span> <span class="operator">=</span> <span class="string">&quot;动动君&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserPhone8</span> <span class="operator">=</span> <span class="string">&quot;18522971450&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;发布者\&quot;&quot;</span> + spanColor(toserviceuserName8) + <span class="string">&quot;（手机号&quot;</span> + spanColor(toserviceuserPhone8) + <span class="string">&quot;）\&quot;已经和接单用户\&quot;&quot;</span> + spanColor(serviceuserName8) + <span class="string">&quot;（手机号&quot;</span> + spanColor(serviceuserPhone8) + <span class="string">&quot;）\&quot;结束了服务，服务时长共计&quot;</span> + spanColor(<span class="string">&quot;2小时45分&quot;</span>) + <span class="string">&quot;，共生成时间币&quot;</span> + spanColor(<span class="string">&quot;165&quot;</span>) + <span class="string">&quot;个。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">9</span>:<span class="comment">//超时自动结束服务</span></span><br><span class="line">               System.out.println(<span class="string">&quot;9&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">timestamp9</span> <span class="operator">=</span> <span class="string">&quot;2022.08.26 13:50&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;该需求在开始服务时间(&quot;</span> + spanColor(timestamp9) + <span class="string">&quot;)之后的24小时内未手动结束，因此已自动结束，共生成时间币&quot;</span> + spanColor(<span class="string">&quot;180&quot;</span>) + <span class="string">&quot;个。&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">10</span>:<span class="comment">//手动评价</span></span><br><span class="line">               System.out.println(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserName10</span> <span class="operator">=</span> <span class="string">&quot;阿文·仁衢&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserPhone10</span> <span class="operator">=</span> <span class="string">&quot;13702173499&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserName10</span> <span class="operator">=</span> <span class="string">&quot;动动君&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserPhone10</span> <span class="operator">=</span> <span class="string">&quot;18522971450&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;发布者\&quot;&quot;</span> + spanColor(toserviceuserName10) + <span class="string">&quot;（手机号&quot;</span> + spanColor(toserviceuserPhone10) + <span class="string">&quot;）\&quot;为接单用户\&quot;&quot;</span> + spanColor(serviceuserName10) + <span class="string">&quot;（手机号&quot;</span> + spanColor(serviceuserPhone10) + <span class="string">&quot;）\&quot;填写评价为&quot;</span> + spanColor(<span class="string">&quot;5&quot;</span>) + <span class="string">&quot;星&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">11</span>:<span class="comment">//超时自动评价</span></span><br><span class="line">               System.out.println(<span class="string">&quot;11&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserName11</span> <span class="operator">=</span> <span class="string">&quot;阿文·仁衢&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">toserviceuserPhone11</span> <span class="operator">=</span> <span class="string">&quot;13702173499&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserName11</span> <span class="operator">=</span> <span class="string">&quot;动动君&quot;</span>;</span><br><span class="line">               <span class="type">String</span> <span class="variable">serviceuserPhone11</span> <span class="operator">=</span> <span class="string">&quot;18522971450&quot;</span>;</span><br><span class="line">               t.setContent(<span class="string">&quot;发布者\&quot;&quot;</span> + spanColor(toserviceuserName11) + <span class="string">&quot;（手机号&quot;</span> + spanColor(toserviceuserPhone11) + <span class="string">&quot;）\&quot;在服务完成24小时内未对为接单用户\&quot;&quot;</span> + spanColor(serviceuserName11) + <span class="string">&quot;（手机号&quot;</span> + spanColor(serviceuserPhone11) + <span class="string">&quot;）\&quot;填写评价，系统给接单用户自动评价&quot;</span> + spanColor(<span class="string">&quot;5&quot;</span>) + <span class="string">&quot;星&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">12</span>:<span class="comment">//已完成</span></span><br><span class="line">               System.out.println(<span class="string">&quot;12&quot;</span>);</span><br><span class="line">               t.setContent(<span class="string">&quot;已完成&quot;</span>);</span><br><span class="line">               t.setTimestamp(DateUtils.getDateTimeStr(s.getInTime()));</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="需求详细信息"><a href="#需求详细信息" class="headerlink" title="需求详细信息"></a>需求详细信息</h4><p>修改查询方法 设置列表查询和count查询用同样的查询语句 只是修改count 大大减少代码</p><p>原始</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">hql</span> <span class="operator">=</span> <span class="string">&quot; from sport_bank_demand as t where t.drop_data = 0&quot;</span>;</span><br></pre></td></tr></table></figure><p>添加条件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hql = buildListBankDemandQuerySql(hql, dto);</span><br></pre></td></tr></table></figure><p>列表加上分页和排序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">hqlBankDemandList</span> <span class="operator">=</span> <span class="string">&quot;select *&quot;</span> + hql + <span class="string">&quot; order by t.in_time desc LIMIT &quot;</span> + ((dto.getPage()-<span class="number">1</span>)*dto.getSize()) + <span class="string">&quot;, &quot;</span> + dto.getSize() + <span class="string">&quot;;&quot;</span>;</span><br></pre></td></tr></table></figure><p>count在条件基础上继续查询 这里的count不是用mysql查询 而是获取到一个全为0的列表 然后看列表长度</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">hqlBankDemandCount</span> <span class="operator">=</span> <span class="string">&quot; select 0&quot;</span> + hql;</span><br></pre></td></tr></table></figure><p>不同的查询方法有的用原生 有的用实体 这里统一用原生</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NativeQuery&lt;BankDemand&gt; query = <span class="built_in">this</span>.getOption().getSession().createNativeQuery(hqlBankDemandList, BankDemand.class);</span><br><span class="line"><span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> Long.valueOf(<span class="built_in">this</span>.getOption().getSession().createNativeQuery(hqlBankDemandList, BankDemand.class).getResultList().size());</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求详情&quot;&gt;&lt;a href=&quot;#需求详情&quot; class=&quot;headerlink&quot; title=&quot;需求详情&quot;&gt;&lt;/a&gt;需求详情&lt;/h3&gt;&lt;h4 id=&quot;过程记录&quot;&gt;&lt;a href=&quot;#过程记录&quot; class=&quot;headerlink&quot; title=&quot;过程记录&quot;&gt;&lt;/a</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8816%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8816%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.468Z</published>
    <updated>2022-09-19T01:25:51.962Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求详情"><a href="#需求详情" class="headerlink" title="需求详情"></a>需求详情</h3><h4 id="过程记录"><a href="#过程记录" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="建表PO"><a href="#建表PO" class="headerlink" title="建表PO"></a>建表PO</h5><p>新建另外两个数据表的PO类</p><h5 id="整理需求全过程"><a href="#整理需求全过程" class="headerlink" title="整理需求全过程"></a>整理需求全过程</h5><p>目前所有的状态代码</p><table><thead><tr><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead><tbody><tr><td>未开始</td><td>服务中</td><td>待评价</td><td>已完成</td><td>已取消</td><td>已失效</td></tr></tbody></table><ul><li><p><strong>未开始</strong> 需求在创建时自动修改状态为<em>0</em></p></li><li><p><strong>已失效</strong> 过了服务开始时间且没有人接单 状态为<em>0-5</em></p></li><li><p><strong>接取需求</strong> 需求被接取 <em>不修改状态 * 状态为</em>0*</p></li><li><p><strong>已取消</strong> </p><ul><li>被接单后 发布人可手动取消订单<em>0-4</em></li><li>超过服务开始时间24小时 自动取消订单<em>0-4</em></li><li><strong>取消状态的订单可被再次接取</strong></li></ul></li><li><p><strong>服务中</strong> 发布者已经和接单用户开始了服务 <em>0-1</em></p></li><li><p><strong>待评价</strong> </p><ul><li>自动结束 该需求在开始服务时间之后的24小时内未手动结束，因此已自动结束，共生成时间币180个。<em>1-2</em></li><li>手动结束 发布者已经和接单用户结束了服务，服务时长共计2小时45分，共生成时间币165个。<em>1-2</em></li></ul></li><li><p><strong>已完成</strong> </p><ul><li>自动评价 发布者在服务完成24小时内未对为接单用户填写评价，系统给接单用户自动评价4星 <em>2-3</em></li><li>手动评价 发布者为接单用户填写评价为5星。<em>2-3</em></li></ul><h5 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h5><p>整理好整体思路之后就简单写了 使用case语句对<code>getOrderChangeState</code>进行分析 对照不同状态选择不同的语句</p><p>名称 手机号 评价等级从另外两个表获取</p><p>变更原因从<code>change_cause</code>获取 变更时间目前是从<code>in_time</code>获取</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求详情&quot;&gt;&lt;a href=&quot;#需求详情&quot; class=&quot;headerlink&quot; title=&quot;需求详情&quot;&gt;&lt;/a&gt;需求详情&lt;/h3&gt;&lt;h4 id=&quot;过程记录&quot;&gt;&lt;a href=&quot;#过程记录&quot; class=&quot;headerlink&quot; title=&quot;过程记录&quot;&gt;&lt;/a</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8815%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8815%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.455Z</published>
    <updated>2022-09-16T00:22:37.341Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求详情"><a href="#需求详情" class="headerlink" title="需求详情"></a>需求详情</h3><h4 id="过程记录"><a href="#过程记录" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="更改特殊字段的颜色"><a href="#更改特殊字段的颜色" class="headerlink" title="更改特殊字段的颜色"></a>更改特殊字段的颜色</h5><p>还是上次的方法 发现了v-html这种用法 可以在后端对特殊值周围加上span标签包裹 然后传递给前端 前端使用v-html展示 </p><p>v-html还支持列表</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-timeline</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-timeline-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(activity, index) in activities&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;activity.icon&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">:type</span>=<span class="string">&quot;activity.type&quot;</span> <span class="attr">:color</span>=<span class="string">&quot;activity.color&quot;</span> <span class="attr">:size</span>=<span class="string">&quot;activity.size&quot;</span> <span class="attr">:timestamp</span>=<span class="string">&quot;activity.inTime&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--              &#123;&#123;activity.changeCause&#125;&#125;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;activity.changeCause&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-timeline-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-timeline</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&#x27;color:#64c2ee&#x27;</span>&gt;</span>&quot;+this.keyWord+&quot;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&quot;</span><br></pre></td></tr></table></figure><h4 id="过程记录-1"><a href="#过程记录-1" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="创建新表"><a href="#创建新表" class="headerlink" title="创建新表"></a>创建新表</h5><p>使用pdm文件创建数据表</p><p>用这种<a href="https://blog.csdn.net/civcx62284/article/details/100289817">方法</a>可以在sql表创建时添加注释</p><p>成功创建了新表</p><h4 id="过程记录-2"><a href="#过程记录-2" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="对于新表的查询"><a href="#对于新表的查询" class="headerlink" title="对于新表的查询"></a>对于新表的查询</h5><p>新建实体继承自TObject 这样可以少写很多东西</p><p>对datadrop报错 发现是数据库数据为空导致的</p><p>其它字段也有类似问题 先使用默认值填充</p><p>由于限制了intime的类型 准备以后新增vo来传递值</p><p>准备按照订单状态和前状态来确定返回值</p><p>仍然准备使用span标签和v-html标签</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求详情&quot;&gt;&lt;a href=&quot;#需求详情&quot; class=&quot;headerlink&quot; title=&quot;需求详情&quot;&gt;&lt;/a&gt;需求详情&lt;/h3&gt;&lt;h4 id=&quot;过程记录&quot;&gt;&lt;a href=&quot;#过程记录&quot; class=&quot;headerlink&quot; title=&quot;过程记录&quot;&gt;&lt;/a</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8814%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8814%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.424Z</published>
    <updated>2022-09-15T01:10:50.931Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求详情"><a href="#需求详情" class="headerlink" title="需求详情"></a>需求详情</h3><h4 id="需求基本信息"><a href="#需求基本信息" class="headerlink" title="需求基本信息"></a>需求基本信息</h4><h5 id="分割线"><a href="#分割线" class="headerlink" title="分割线"></a>分割线</h5><p>本来使用Element-UI的下滑线组件 但是由于美化额原因我所有的东西是在一个div标签里 所以这个下划线就会向左突出 如果修改左边距就会向右突出 修改宽度的话不能适配不同大小的屏幕</p><p>可以再使用一个div做限制 但是也可以直接div加边框颜色来当分割线</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cuttingLine&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*分割线*/</span></span><br><span class="line"><span class="selector-class">.cuttingLine</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0.5px</span> solid <span class="number">#e0e0e0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="过程记录"><a href="#过程记录" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="特定字符的颜色替换"><a href="#特定字符的颜色替换" class="headerlink" title="特定字符的颜色替换"></a>特定字符的颜色替换</h5><p>需求要求的是能将用户名和手机号的颜色蓝色突出显示 网上找了一堆以后发现这个<a href="https://blog.csdn.net/zdw_wym/article/details/42468313">方法</a>可以</p><p>经过实验 可以嵌套使用 但是不知道怎么才能带入时间线组件 </p><p>准备先完成后端数据再说</p><h4 id="过程记录-1"><a href="#过程记录-1" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="前后端沟通"><a href="#前后端沟通" class="headerlink" title="前后端沟通"></a>前后端沟通</h5><p>这个时间线组件只有一个字段容器，所以他需要的是列表形式</p><p>后端返回来的列表不能使用 打印发现传回来的是列表 而他需要的是对象</p><p>实验发现<code>JSON.parse</code>第一次变列表 再一次就变成属性了</p><h4 id="过程记录-2"><a href="#过程记录-2" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="后端编写"><a href="#后端编写" class="headerlink" title="后端编写"></a>后端编写</h5><p>思路是新建一个类型 这个类型包含两个String，一个存储<code>content</code>一个存储<code>timestamp</code></p><p>需求的类型是固定的 所以只要对特定的字段进行查询 组合成固定的语句，然后放到新类型组成的列表里就行</p><p>实际编写中 问题大多数是sql查询和数据获取 虽然之前已经总结过这些在对应的数据库中的字段 但是这个框架的sql还是有些乱 目前还是使用了<code>this.find</code>然后格式强转进行获取</p><p>写一半发现问题 项目允许需求出现取消、失效、再接取等众多分支，这些东西无法在数据库获取</p><p>沟通 准备新建数据库</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求详情&quot;&gt;&lt;a href=&quot;#需求详情&quot; class=&quot;headerlink&quot; title=&quot;需求详情&quot;&gt;&lt;/a&gt;需求详情&lt;/h3&gt;&lt;h4 id=&quot;需求基本信息&quot;&gt;&lt;a href=&quot;#需求基本信息&quot; class=&quot;headerlink&quot; title=&quot;需求基本信</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8813%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8813%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.382Z</published>
    <updated>2022-09-14T02:03:07.283Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求详情"><a href="#需求详情" class="headerlink" title="需求详情"></a>需求详情</h3><h4 id="过程记录"><a href="#过程记录" class="headerlink" title="过程记录"></a>过程记录</h4><h5 id="所需字段"><a href="#所需字段" class="headerlink" title="所需字段"></a>所需字段</h5><ul><li>创建时间 fit_xdl_demand.in_time</li><li>需求接取人 fit_xdl_order_form.serviceuser_id</li><li>需求接取时间 fit_xdl_order_form.receive_time （我自己新增的）</li><li>服务开始时间 fit_xdl_order_form.start_time</li><li>服务结束时间 fit_xdl_order_form.end_time</li><li>服务时长 fit_xdl_order_form.end_time-fit_xdl_order_form.start_time</li><li>生成时间币 fit_xdl_order_form.money</li><li>评价时间 fit_xdl_order_form_comment.in_time</li><li>评价 fit_xdl_order_form_comment.star</li></ul><h4 id="需求基本信息"><a href="#需求基本信息" class="headerlink" title="需求基本信息"></a>需求基本信息</h4><h5 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h5><p>在网上找了一大堆 大部分都是组件什么的 又由于电脑上没有sass环境 总之过程很艰难</p><p>网上看了一堆 发现最好还是使用sass样式 不断的卸载安装环境 最后终于在一次删除node_modules又重新npm i之后有了sass环境</p><p>然后在翟梦云的推荐下找到了一个不错的<a href="https://blog.csdn.net/weixin_45332084/article/details/119774811?spm=1001.2101.3001.6650.5&utm_medium=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~Rate-5-119774811-blog-106613619.pc_relevant_multi_platform_whitelistv4&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~OPENSEARCH~Rate-5-119774811-blog-106613619.pc_relevant_multi_platform_whitelistv4&utm_relevant_index=8">教程</a></p><p>这个教程的效果差不多 有问题 但是能改</p><p>一点点摸索 最后达成了效果</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;al in als&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text more&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;more&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:5px; margin-left:10px;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;&#x27;retract&#x27;: al.status&#125;&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;&#x27;max-height&#x27;:al.status ? textHeight: &#x27;&#x27;&#125;&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;textContainer&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;demandDetail.description&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;al.status&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;al.status = false&quot;</span>&gt;</span>展开<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;al.status == false&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;al.status = true&quot;</span>&gt;</span>收起<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">als</span>: [&#123;&#125;],</span><br><span class="line">      <span class="attr">textHeight</span>: <span class="literal">null</span>,    </span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">als</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">ele, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">als</span>, index, <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, ele, &#123;</span><br><span class="line">        <span class="attr">status</span>: <span class="literal">null</span></span><br><span class="line">      &#125;))</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// DOM 加载完执行</span></span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">calculateText</span>()</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">als</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">ele, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">als</span>, index, <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, ele, &#123;</span><br><span class="line">          <span class="attr">status</span>: <span class="literal">null</span></span><br><span class="line">        &#125;))</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">calculateText</span>()</span><br><span class="line">      &#125;, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">back</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">calculateText</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 获取一行文字的height 计算当前文字比较列表文字</span></span><br><span class="line">      <span class="keyword">let</span> oneHeight = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">more</span>.<span class="property">scrollHeight</span></span><br><span class="line">      <span class="keyword">let</span> twoHeight = oneHeight * <span class="number">1</span> || <span class="number">26</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">textHeight</span> = <span class="string">`<span class="subst">$&#123;twoHeight&#125;</span>px`</span></span><br><span class="line">      <span class="keyword">let</span> txtDom = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">textContainer</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; txtDom.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> curHeight = txtDom[i].<span class="property">offsetHeight</span></span><br><span class="line">        <span class="keyword">if</span> (curHeight &gt; twoHeight) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">als</span>, i, <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">als</span>[i], &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="literal">true</span></span><br><span class="line">          &#125;))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">als</span>, i, <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, <span class="variable language_">this</span>.<span class="property">als</span>[i], &#123;</span><br><span class="line">            <span class="attr">status</span>: <span class="literal">null</span></span><br><span class="line">          &#125;))</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#212121</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.retract</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.retract</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, transparent, <span class="number">#fff</span> <span class="number">45%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#64c2ee</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.more</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666666</span>;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="所在区"><a href="#所在区" class="headerlink" title="所在区"></a>所在区</h5><p>查看了相关代码 询问了宋经理 查看了数据库 发现了CountryId字段 但是这个数字没有规律 网上搜索不到相关信息 不得不使用Ctrl+shift+F，找到了相关的代码 并且发现了cn_crazyasp_fitnessroute_county_county数据库，找到了getAddress方法</p><p>添加字段遇到了一点点问题询问李哥和查找相关教程后添加一段代码可以使用<code>@Column(insertable=false,updatable=false,name = &quot;country_id&quot;)</code></p><p>使用getAddress方法时遇到问题 这个不是static方法 不能代码调用 但是加了static之后代码中的this又会报错 直接复制过来使用了</p><p>又根据需求适当修改代码 在字段中间添加<code>-</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">(Long countryId)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">hql</span> <span class="operator">=</span> <span class="string">&quot; from cn.crazyasp.county.TCounty as t  where t.dropData = false and t.id=&quot;</span>+countryId;</span><br><span class="line">    <span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">TCounty</span> <span class="variable">country</span> <span class="operator">=</span> (TCounty) <span class="built_in">this</span>.uniqueResult(hql);</span><br><span class="line">    <span class="keyword">if</span> (country!=<span class="literal">null</span>) &#123;</span><br><span class="line">        address = country.getName();</span><br><span class="line">        <span class="type">TCounty</span> <span class="variable">country1</span> <span class="operator">=</span> country.getParent();</span><br><span class="line">        <span class="keyword">if</span> (country1!=<span class="literal">null</span>) &#123;</span><br><span class="line">            address=country1.getName()+ <span class="string">&quot;-&quot;</span> +address;</span><br><span class="line">            <span class="type">TCounty</span> <span class="variable">country2</span> <span class="operator">=</span> country1.getParent();</span><br><span class="line">            <span class="keyword">if</span> (country2!=<span class="literal">null</span>) &#123;</span><br><span class="line">                address=country2.getName()+ <span class="string">&quot;-&quot;</span> +address;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求详情&quot;&gt;&lt;a href=&quot;#需求详情&quot; class=&quot;headerlink&quot; title=&quot;需求详情&quot;&gt;&lt;/a&gt;需求详情&lt;/h3&gt;&lt;h4 id=&quot;过程记录&quot;&gt;&lt;a href=&quot;#过程记录&quot; class=&quot;headerlink&quot; title=&quot;过程记录&quot;&gt;&lt;/a</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8809%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8809%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.347Z</published>
    <updated>2022-09-09T14:49:38.397Z</updated>
    
    <content type="html"><![CDATA[<h3 id="需求详情-前端"><a href="#需求详情-前端" class="headerlink" title="需求详情 前端"></a>需求详情 前端</h3><p>问题：需求详情</p><p>解决过程：</p><ol><li><p>之前写表格遇到过 使用的是<code>show-overflow-tooltip</code> 但是这个只对表格生效 不能再次使用</p></li><li><p>准备使用element的Popover 弹出框组件</p></li><li><p>查看文档扒了代码下来发现没有样式</p></li><li><p>查询发现Popover 弹出框有严格的使用条件</p></li><li><p>准备去哔哩哔哩学习现写一个 过于复杂 放弃</p></li><li><p>在逛bilibili时发现他们的分p栏也是这种效果 扒了代码下来</p></li><li><p>发现用的是title的方法 能实现功能 但是和element的Popover 弹出框组件一样没有样式</p></li><li><p>搜索设置title的样式的方法 没有效果</p></li><li><p>搜索过程中发现给第三方组件库加新样式的方法 可以限制Tooltip 文字提示的提示框宽度</p></li><li><p>之前看过Tooltip 文字提示框 有样式 比较好看 但是太长了 占一页 有时两侧的数据还显示不全</p></li><li><p>换成Tooltip 文字提示，修改样式</p></li><li><pre><code class="css">/*Tooltip 文字提示*/.el-tooltip__popper &#123;  max-width:50%;  font-size: 16px;&#125;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">13. 基础格式的提示框需要`“”`不是很方便 换成了更多 Content的样式 更加简洁</span><br><span class="line"></span><br><span class="line">14. ```html</span><br><span class="line">    &lt;el-tooltip class=&quot;item&quot; effect=&quot;dark&quot; content=&quot;Top Center 提示文字&quot; placement=&quot;top&quot;&gt;</span><br><span class="line">        &lt;el-button&gt;上边&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-tooltip&gt;</span><br><span class="line">    &lt;!-- 替换成 --&gt;</span><br><span class="line">    &lt;el-tooltip placement=&quot;top&quot; effect=&quot;light&quot;&gt;</span><br><span class="line">        &lt;div slot=&quot;content&quot;&gt;&#123;&#123;demandDetail.name&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;span&gt;&#123;&#123;demandDetail.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/el-tooltip&gt;</span><br></pre></td></tr></table></figure></code></pre></li><li><p>研究下面的文字展开效果</p></li><li><p>element没有一样效果的组件 区别的地方看</p></li><li><p>看到很多不错的组件 但是我本地总是不能实现</p></li><li><p>暂时搁置 研究下面的时间线</p></li><li><p>element有对应的东西 cv大法</p></li><li><p>修改一下外标签的样式</p></li><li><pre><code class="html">&lt;div class=&quot;border_radius&quot;&gt;  &lt;div class=&quot;left-lineBox&quot; style=&quot;margin-top:22px; margin-left:-20px;&quot;&gt;    &lt;el-timeline&gt;      &lt;el-timeline-item        v-for=&quot;(activity, index) in activities&quot;        :key=&quot;index&quot;        :icon=&quot;activity.icon&quot;        :type=&quot;activity.type&quot;        :color=&quot;activity.color&quot;        :size=&quot;activity.size&quot;        :timestamp=&quot;activity.timestamp&quot;&gt;        &#123;&#123;activity.content&#125;&#125;      &lt;/el-timeline-item&gt;    &lt;/el-timeline&gt;  &lt;/div&gt;&lt;/div&gt;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">22. element默认的样式与需求文档不太一样 修改之</span><br><span class="line"></span><br><span class="line">23. 对三种element提供的样式进行对比 为了不涉及排序（因为在我这里不生效)，最后选择了对自定义样式进行修改 还能定义更多的美化效果</span><br><span class="line"></span><br><span class="line">24. 学到了用检查cv样式的方法</span><br><span class="line"></span><br><span class="line">25. 先从时间线的竖线下手</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">26. ```css</span><br><span class="line">    /*时间线的线*/</span><br><span class="line">    .el-timeline-item__tail &#123;</span><br><span class="line">      -webkit-box-direction: normal;</span><br><span class="line">      color: rgb(0, 0, 0);</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      list-style: none;</span><br><span class="line">      position: absolute;</span><br><span class="line">      left: 4px;</span><br><span class="line">      height: 100%;</span><br><span class="line">      border-left: 2px solid #797979;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre></li><li><p>然后修改旁边圆的样式</p></li><li><p>本来准备直接修改旁边的圆为一个icon 但是element的icon库没有这种简单的圆形 引入外部icon太麻烦 不用</p></li><li><p>修改借点为一个图形 设置圆角为50%就变成了圆 </p></li><li><p>设置背景和边框为需要的效果</p></li><li><p>设置形状变大后不在时间线的中间了 修改位置</p></li><li><p>&#96;&#96;&#96;css<br>&#x2F;<em>时间线的圈</em>&#x2F;<br>.el-timeline-item__node {<br>  position: absolute;<br>  background-color: #ffffff;<br>  border-color: #606060;<br>  border-radius: 50%;<br>  border-width:2px;<br>  border-style: solid;<br>  height: 20px;<br>  width: 20px;<br>  margin-left:-5px;<br>  display: -webkit-box;<br>  display: -ms-flexbox;<br>  display: flex;<br>  -webkit-box-pack: center;<br>  -ms-flex-pack: center;<br>  justify-content: center;<br>  -webkit-box-align: center;<br>  -ms-flex-align: center;<br>  align-items: center;<br>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">33. 最后修改旁边的文字样式 标题以后还得改 因为里面得有嵌套的蓝色文字</span><br><span class="line"></span><br><span class="line">34. 时间样式这里准备按照需求新增`时间：  `字样 但是`content:`没有效果</span><br><span class="line"></span><br><span class="line">35. 搜索一番后发现用法不对需要用`::before&#123;&#125;`</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">36. ```css</span><br><span class="line">    /*时间线时间*/</span><br><span class="line">    .el-timeline-item__timestamp.is-bottom &#123;</span><br><span class="line">      content: &quot;时间：  &quot;;</span><br><span class="line">      margin-top: 8px;</span><br><span class="line">      font-size: 16px;</span><br><span class="line">    &#125;</span><br><span class="line">    .el-timeline-item__timestamp.is-bottom::before &#123;</span><br><span class="line">      content:&quot;时间: &quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol><p>结果：大部分样式已经完成 但还需要完善</p><h3 id="需求详情的需求名称-前后端"><a href="#需求详情的需求名称-前后端" class="headerlink" title="需求详情的需求名称 前后端"></a>需求详情的需求名称 前后端</h3><p>问题：需求详情</p><p>解决过程：</p><ol><li>前端界面的获取是仿照<code>updateDemand</code>的，所以只要我们把数据给<code>DemandManage.vue</code>，也就是<code>listDemands</code>接口有数据 大家就都有数据</li><li>一个个按照顺序来 大部分都是本来就有的</li><li>需要添加的有phone 手机号 这个考虑到数据库数据不规范 设置没有手机号的返回为“未设置手机号”</li><li>还有个发布时间 查看数据库数据和相关代码发现，有一个字段intime，就是新增这条数据的时间 作为intime使用</li><li>还发现了之前的工具类<code>getDateTimeStr()</code> 啊这 我还自己写了一个…</li><li>还有一个比较麻烦的就是需求类型 </li><li>这个字段已经有了 但是只有二类字段 需求上是要求一类二类都显示的</li><li>查看数据库 有相关字段和id id暂时不用管 字段是能使用的 </li><li>之前的代码是使用<code>TDemand</code>里的<code>ServiceType</code>但是这个是一个类 而且不包含服务类型全称</li><li>查看代码发现还有一个<code>DemandType</code>是数据库原本数据</li><li>新问题 <code>TDemand</code>的<code>ServiceType</code>放到<code>ListDemandVo</code>的<code>DemandType</code>里去了 这导致为了不大批量修改其他代码  我们只能用别的字段</li><li>这个框架又限制字段名称必须与数据库对应 这就得占用一个其他的字段 最后不得不<code>t.setServiceType</code></li><li>由于数据库字段两个类之间使用<code>&amp;</code>分格，需求是用<code>-</code>分格，使用<code>.replace(&#39;&amp;&#39;,&#39;-&#39;)</code>进行替换</li><li>这个预计时长不知道是啥 猜猜和<code>持续时长duration</code>是一个东西 暂时使用</li><li>这个所在区由于地址不规范暂时不修改 如果数据全部是<code>天津市河东区丰乐里</code>或者<code>天津市天津市西青区</code>可能会考虑进行分隔</li></ol><p>结果：完成需求基本信息的后端编写</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;需求详情-前端&quot;&gt;&lt;a href=&quot;#需求详情-前端&quot; class=&quot;headerlink&quot; title=&quot;需求详情 前端&quot;&gt;&lt;/a&gt;需求详情 前端&lt;/h3&gt;&lt;p&gt;问题：需求详情&lt;/p&gt;
&lt;p&gt;解决过程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;之前写表格遇到过 使用的是</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8808%E6%97%A5/"/>
    <id>https://www.szjm.online/2022/10/19/hwcd/%E6%97%A5%E5%BF%97/2022.09/2022%E5%B9%B49%E6%9C%8808%E6%97%A5/</id>
    <published>2022-10-19T13:41:48.307Z</published>
    <updated>2022-09-09T01:42:26.174Z</updated>
    
    <content type="html"><![CDATA[<h3 id="maven打包失败"><a href="#maven打包失败" class="headerlink" title="maven打包失败"></a>maven打包失败</h3><p>问题：maven打包提示缺少类</p><p>解决过程：</p><ol><li>上网搜索，尝试把把包放在jdk的包目录下 但是还是解决不了问题</li><li>在pom文件中新增maven代码 解决</li></ol><p>结果：能够打包</p><h3 id="maven打包不是jar"><a href="#maven打包不是jar" class="headerlink" title="maven打包不是jar"></a>maven打包不是jar</h3><p>问题：maven打包是war格式</p><p>解决过程：</p><ol><li>上网搜索 发现是在pom中设置的</li><li>搜索pom中的war字段</li><li>筛选替换为jar</li></ol><p>结果：打包出来的是jar格式</p><h3 id="maven打的包不是需要的"><a href="#maven打的包不是需要的" class="headerlink" title="maven打的包不是需要的"></a>maven打的包不是需要的</h3><p>问题： 需要<code>-with-dependencies.jar</code> 但是只有jar</p><p>解决过程：</p><ol><li>上网搜索 发现需要修改pom文件</li><li>尝试修改 失败 maven不识别</li><li>从另一个项目复制相关代码过来 能够运行</li></ol><p>结果：能够生成需要的jar包</p><h3 id="公益人员查询没有数据"><a href="#公益人员查询没有数据" class="headerlink" title="公益人员查询没有数据"></a>公益人员查询没有数据</h3><p>问题：公益人员查询接口没有数据</p><p>解决过程：</p><ol><li>在app代码中搜索相关代码</li><li>找到相关接口 在后端查看相关代码</li><li>使用postman测试 不返回数据</li><li>查看控制台 发现输出了查询的sql语句 说明不是查询的问题</li><li>因为try catch的包裹 没有报错信息输出 暂时注释掉</li><li>再次运行发现错误出现在排序语句</li><li>已知是按照地点远近排序的 按照这个思路下去查询</li><li>查看数据库数据 发现有几条数据的经纬度为空 而排序是按照这个字段进行的</li><li>修改数据库数据 暂时把数据补完</li><li>再次查询 能够正常返回数据</li></ol><p>结果：系数据库数据不规范的原因 已暂时解决</p><h3 id="公益人员查询接口新增条件"><a href="#公益人员查询接口新增条件" class="headerlink" title="公益人员查询接口新增条件"></a>公益人员查询接口新增条件</h3><p>问题：公益人员查询接口新增按照id和名称查询</p><p>解决过程：</p><ol><li>一般都是按照uid和nickname查询 这次也按照这个来查询</li><li>接口新增字段 并且把其他的相关方法新增字段</li><li>sql语句仿照之前的语句新增 虽然和需求服务查询不一样 但是因为简单明了 所以会写</li><li>双条件模糊查询使用in的嵌套查询</li></ol><p>结果：已经能够按照uid和名称进行模糊查询</p><h3 id="需求详情"><a href="#需求详情" class="headerlink" title="需求详情"></a>需求详情</h3><p>问题： 新增需求详情界面</p><p>解决过程：</p><ol><li><p>入口按照之前的方式新增 适当修改单元格宽度保持美观</p></li><li><p>先按照需求仿写页面</p></li><li><p>先仿写查询中的loading和白色拟态背景 照搬之前的代码</p></li><li><pre><code class="html">&lt;div style=&quot;width: 100%; height: 100%&quot; v-loading=&quot;loading&quot;&gt;    &lt;el-card style=&quot;color: #746b6b&quot;&gt;    &lt;/el-card&gt;&lt;/div&gt;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">5. 仿写返回上一页字样</span><br><span class="line"></span><br><span class="line">6. 使用p标签 添加一个`@click`方法完成点击返回操作</span><br><span class="line"></span><br><span class="line">7. 鼠标移上去之后没有变成小手字样 设置样式 顺便设置字号颜色与需求对齐</span><br><span class="line"></span><br><span class="line">8. ```vue</span><br><span class="line">   &lt;template &gt;</span><br><span class="line">    &lt;p class=&quot;backStr&quot; @click = &quot;back&quot;&gt;返回上一页&lt;/p&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   &lt;style  scoped&gt;</span><br><span class="line">   .backStr &#123;</span><br><span class="line">     color: #64c2ee;</span><br><span class="line">     font-size: 18px;</span><br><span class="line">     cursor: pointer;  /*鼠标悬停变小手*/</span><br><span class="line">     width: 100%;</span><br><span class="line">   &#125;</span><br><span class="line">   &lt;/style&gt;</span><br></pre></td></tr></table></figure></code></pre></li><li><p>仿写小标题<code>需求基本信息</code></p></li><li><p>依旧使用p标签 设置样式</p></li><li><pre><code class="vue">&lt;template &gt;&lt;p class=&quot;title1&quot;&gt;需求基本信息&lt;/p&gt;&lt;/template&gt;&lt;style  scoped&gt;.title1 &#123;  color: #1d1d1d;  font-size: 25px;  width: 100%;  margin: 25px 0px 18px 0px;&#125;&lt;/style&gt;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">12. 仿写圆角边框</span><br><span class="line"></span><br><span class="line">13. 使用div标签 设置样式</span><br><span class="line"></span><br><span class="line">14. ```vue</span><br><span class="line">    &lt;template &gt;</span><br><span class="line">        &lt;div class=&quot;border_radius&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;style  scoped&gt;</span><br><span class="line">    .border_radius&#123;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">      border:1px solid #b4b4b4</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;/style&gt;</span><br></pre></td></tr></table></figure></code></pre></li><li><p>需求界面里边框里面的字与边框室友距离的 修改里面的字位置</p></li><li><p>新增一个div 设置与上一个div的边距</p></li><li><pre><code class="html">&lt;div style=&quot;margin-top:22px; margin-left:-30px; margin-bottom:15px; margin-right: 15px&quot;&gt;&lt;/div&gt;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">18. 设置里面的文字 询问朋友 被推荐使用ul标签</span><br><span class="line"></span><br><span class="line">19. ```html</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;服务名称：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 第二组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;类型：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;预计时长：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;服务开始时间：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 第三组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;所在区：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;详细地址：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 第四组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;可同时服务人数：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;以购买人数：&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 线 --&gt;</span><br><span class="line">    &lt;ul class=&quot;line&quot;&gt;&lt;/ul&gt;</span><br><span class="line">    &lt;!-- 第一组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;发布人昵称:&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;发布人手机号:&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;发布时间:&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 第二组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;需要每人额外支付的时间币&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 线 --&gt;</span><br><span class="line">    &lt;ul class=&quot;line&quot;&gt;&lt;/ul&gt;</span><br><span class="line">    &lt;!-- 第一组 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;li class=&quot;li&quot;&gt;服务描述:&lt;/li&gt;</span><br><span class="line">        &lt;li class=&quot;item&quot;&gt;&#123;&#123;放字段&#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br></pre></td></tr></table></figure></code></pre></li><li><p>修改样式更符合需求界面</p></li><li><pre><code class="css">.li &#123;  margin: 0px 0px 0px 10px;  font-size: 17px;  display: inline;&#125;.item &#123;  font-size: 17px;  display: inline;&#125;.itemonly-way1 &#123;  font-size: 18px;  color: #212121;  margin: 0px 0px 0px 10px;  display: -webkit-box;&#125;</code></pre></li><li><p>需求需要需求名称字段单行显示并隐藏 考虑到多行显示与美化准备使用Popover 弹出框组件</p></li><li><p>不知道为什么Popover 弹出框组件是默认样式的 搜索修改方法</p></li><li><p>自定义样式也不管用 准备自己写一个</p></li></ol><p>结果：已完成部分界面</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;maven打包失败&quot;&gt;&lt;a href=&quot;#maven打包失败&quot; class=&quot;headerlink&quot; title=&quot;maven打包失败&quot;&gt;&lt;/a&gt;maven打包失败&lt;/h3&gt;&lt;p&gt;问题：maven打包提示缺少类&lt;/p&gt;
&lt;p&gt;解决过程：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;</summary>
      
    
    
    
    
  </entry>
  
</feed>
