<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>SpringBoot前后端分离Token验证 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="SpringBoot前后端分离Token验证过程图">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot前后端分离Token验证">
<meta property="og:url" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="SpringBoot前后端分离Token验证过程图">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/登录流程.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/访问流程.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/退出流程.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/后端Token登录演示-Postman.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/后端Token登录演示-Redis.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/后端Token验证演示-Postman.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/后端Token登录注销演示-Postman.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/后端Token登录注销演示-Redis.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/过滤器登录演示-Postman.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/过滤器访问演示-Postman.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/过滤器访问演示-获取到Token.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/过滤器访问演示-Redis空值.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/修复bug访问演示-正确Token.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/修复bug访问演示-错误Token.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/修复bug访问演示-错误Token后端.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/修复bug访问演示-无Token.png">
<meta property="og:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/修复bug访问演示-无Token后端.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220213184511775.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220213184636569.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220213185101448.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214104312254.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214105246549.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214110603166.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214115304651.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214135503332.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214134722387.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214141322823.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214151336170.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214202703129.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214202732484.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214203113349.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214224725880.png">
<meta property="og:image" content="http://example.com/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214231219844.png">
<meta property="article:published_time" content="2022-02-13T06:38:00.000Z">
<meta property="article:modified_time" content="2022-03-20T11:17:05.416Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="SpringBoot前后端分离">
<meta property="article:tag" content="Token验证">
<meta property="article:tag" content="Redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/SpringBoot前后端分离Token验证/登录流程.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Spring/SpringBoot/SpringBoot前后端分离Token验证" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/" class="article-date">
  <time class="dt-published" datetime="2022-02-13T06:38:00.000Z" itemprop="datePublished">2022-02-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C/">工作</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C/%E6%99%BA%E5%B0%A7/">智尧</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C/%E6%99%BA%E5%B0%A7/SpringBoot/">SpringBoot</a>►<a class="article-category-link" href="/categories/%E5%B7%A5%E4%BD%9C/%E6%99%BA%E5%B0%A7/SpringBoot/Token%E9%AA%8C%E8%AF%81/">Token验证</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      SpringBoot前后端分离Token验证
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="SpringBoot前后端分离Token验证"><a href="#SpringBoot前后端分离Token验证" class="headerlink" title="SpringBoot前后端分离Token验证"></a>SpringBoot前后端分离Token验证</h2><h3 id="过程图"><a href="#过程图" class="headerlink" title="过程图"></a>过程图<span id="more"></span></h3><ul>
<li>登录 <img src="SpringBoot前后端分离Token验证\登录流程.png"></li>
<li>访问 <img src="SpringBoot前后端分离Token验证\访问流程.png"></li>
<li>退出 <img src="SpringBoot前后端分离Token验证\退出流程.png"></li>
</ul>
<h3 id="后端Token相关"><a href="#后端Token相关" class="headerlink" title="后端Token相关"></a>后端Token相关</h3><p>参考 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1kE411J7JQ">【Token】01.令牌的生成与存储_哔哩哔哩_bilibili</a></p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><ol>
<li><p>Maven依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>application.properties配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#redis</span></span><br><span class="line"><span class="comment">##指定使用redis数据库索引(默认为0)</span></span><br><span class="line"><span class="attr">spring.redis.database</span>=<span class="string">0</span></span><br><span class="line"><span class="comment">##指定Redis服务器地址</span></span><br><span class="line"><span class="attr">spring.redis.host</span>=<span class="string">127.0.0.1</span></span><br><span class="line"><span class="comment">##指定Redis端口号</span></span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment">##指定Redis密码 （没有可以不写）</span></span><br><span class="line"><span class="comment">#spring.redis.password=123456</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>后端Token上传</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(&quot;LoginToken&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">LoginToken</span><span class="params">(<span class="meta">@RequestParam(&quot;user_name&quot;)</span> String acctName, <span class="meta">@RequestParam(&quot;user_password&quot;)</span> String acctPass)</span> &#123;</span><br><span class="line">    Map&lt;String, Object&gt; map_res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    <span class="type">UserBean</span> <span class="variable">userBean</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    System.out.println(<span class="string">&quot;+++++地址栏获取：+++++&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;用户名：&quot;</span> + acctName);</span><br><span class="line">    System.out.println(<span class="string">&quot;密码：&quot;</span> + acctPass);</span><br><span class="line">    System.out.println(<span class="string">&quot;++++++++++++++++++++&quot;</span>);</span><br><span class="line"> 	<span class="comment">//与数据库确认用户信息</span></span><br><span class="line">    userBean = loginService.findUser(acctName, acctPass);</span><br><span class="line">    <span class="keyword">if</span> (userBean != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">userId</span> <span class="operator">=</span> userBean.getUser_id();</span><br><span class="line">        <span class="comment">//生成token令牌</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> String.valueOf(UUID.randomUUID());</span><br><span class="line">        System.out.println(token);</span><br><span class="line">        <span class="comment">//存到redis数据库 token 用户名 有效时间</span></span><br><span class="line">        redisTemplate.opsForValue().set(token, JSON.toJSONString(userBean), Duration.ofHours(<span class="number">1</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;登录成功&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;200&quot;</span>);</span><br><span class="line">      	map_res.put(<span class="string">&quot;uid&quot;</span>,userId);</span><br><span class="line">		map_res.put(<span class="string">&quot;token&quot;</span>,token);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;失败&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;500&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map_res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>后端Token验证</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;getUserOfLogin&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getUserOfLogin</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">    Map&lt;String, Object&gt; map_res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//获取Headers中的参数</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">    <span class="comment">//从Redis中获取信息</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> redisTemplate.opsForValue().get(token);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;用户已登录&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;用户已登录&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;200&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;登录已过期&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;登录已过期&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;500&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map_res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>后端Token删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;loginout&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">logout</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map_res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//删除Redis中的token</span></span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">delete</span> <span class="operator">=</span> redisTemplate.delete(token);</span><br><span class="line">        System.out.println(<span class="string">&quot;登录已注销&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;登录已注销&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;200&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception exception) &#123;</span><br><span class="line">        exception.printStackTrace();</span><br><span class="line">        System.out.println(<span class="string">&quot;注销失败&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;注销失败&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;500&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map_res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h4><ol>
<li><p>登录</p>
<img src="SpringBoot前后端分离Token验证\后端Token登录演示-Postman.png">

<img src="SpringBoot前后端分离Token验证\后端Token登录演示-Redis.png">
</li>
<li><p>验证</p>
<img src="SpringBoot前后端分离Token验证\后端Token验证演示-Postman.png">
</li>
<li><p>退出</p>
<img src="SpringBoot前后端分离Token验证\后端Token登录注销演示-Postman.png">

<img src="SpringBoot前后端分离Token验证\后端Token登录注销演示-Redis.png"></li>
</ol>
<h3 id="后端拦截器"><a href="#后端拦截器" class="headerlink" title="后端拦截器"></a>后端拦截器</h3><p>参考 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV19E411v7Ty?p=12">【狂神说Java】SpringBoot开发简单的网站_哔哩哔哩_bilibili</a></p>
<h4 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h4><ol>
<li><p>新建<code>config</code>文件夹</p>
</li>
<li><p>拦截器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                             HttpServletResponse response,</span></span><br><span class="line"><span class="params">                             Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Map&lt;String, Object&gt; map_res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//获取Headers中的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;token: &quot;</span> + token);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在redis中用token检索信息</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> redisTemplate.opsForValue().get(token);</span><br><span class="line">        System.out.println(<span class="string">&quot;user: &quot;</span> + user);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;用户已登录200&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;用户已登录&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;200&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;登录已过期500&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;登录已过期&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;500&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>MVC配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//自定义拦截器 拦截所有 但是排除excludePathPatterns</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">LoginHandlerInterceptor</span>()).addPathPatterns(<span class="string">&quot;/**&quot;</span>).excludePathPatterns(<span class="string">&quot;/fvcs/LoginToken&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="演示-1"><a href="#演示-1" class="headerlink" title="演示"></a>演示</h4><ol>
<li><p>登录</p>
<p>由于我们在自定义的拦截器里排除了登录接口 所以仍然可以登录</p>
<img src="SpringBoot前后端分离Token验证\过滤器登录演示-Postman.png">
</li>
<li><p>携带Token访问</p>
<img src="SpringBoot前后端分离Token验证\过滤器访问演示-Postman.png"></li>
</ol>
<h4 id="发现Bug"><a href="#发现Bug" class="headerlink" title="发现Bug"></a>发现Bug</h4><p>我们查看日志 发现获取到了token值 Redis中也存在相关信息 但是获取不到数据 </p>
<p>获取到了token   <img src="SpringBoot前后端分离Token验证\过滤器访问演示-获取到Token.png"></p>
<p>获取不到redis的信息</p>
<img src="SpringBoot前后端分离Token验证\过滤器访问演示-Redis空值.png">

<p>在网上搜索后发现解决办法<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_48445961/article/details/116462520"> 拦截器中使用redisTemplate获取数据报空指针</a></p>
<p><strong>自定义一个工具类，让它在注入容器时就生效，在拦截器中只需要使用该工具类即可</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果不使用这个注入 拦截器获取不到redis的值</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//项目运行时就注入Spring容器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisUtils</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//赋值一个静态的redisTemplate</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> RedisTemplate redis;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span> <span class="comment">//此注解表示构造时赋值</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">redisTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        redis = <span class="built_in">this</span>.redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时修改拦截器</p>
<p>修改</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> redisTemplate.opsForValue().get(token);</span><br></pre></td></tr></table></figure>

<p>为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> RedisUtils.redis.opsForValue().get(token);</span><br></pre></td></tr></table></figure>
<p>因为使用了自定义工具类所以可以删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br></pre></td></tr></table></figure>
<h4 id="修复Bug后再次演示"><a href="#修复Bug后再次演示" class="headerlink" title="修复Bug后再次演示"></a>修复Bug后再次演示</h4><ol>
<li><p>携带Token访问</p>
<p>可以下载到图片</p>
<img src="SpringBoot前后端分离Token验证\修复bug访问演示-正确Token.png">
</li>
<li><p>携带错误Token访问</p>
<p>下载不到图片 后端提示<code>登录已过期</code></p>
<img src="SpringBoot前后端分离Token验证\修复bug访问演示-错误Token.png">

<img src="SpringBoot前后端分离Token验证\修复bug访问演示-错误Token后端.png">
</li>
<li><p>不携带Token访问</p>
<p>下载不到图片 网页提示<code>500</code> 后端报错</p>
<img src="SpringBoot前后端分离Token验证\修复bug访问演示-无Token.png">

<img src="SpringBoot前后端分离Token验证\修复bug访问演示-无Token后端.png">
</li>
<li><p>网页访问</p>
<p>下载不到图片 网页提示<code>500</code> 后端报错</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220213184511775.png" alt="image-20220213184511775"><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220213184636569.png" alt="image-20220213184636569"></p>
<p>因为浏览器的请求头里没有携带Token值<img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220213185101448.png" alt="image-20220213185101448"></p>
</li>
</ol>
<h3 id="前端拦截器"><a href="#前端拦截器" class="headerlink" title="前端拦截器"></a>前端拦截器</h3><blockquote>
<p>因为我们拦截了所有请求 所以对每一个请求添加token值不太现实 所以我们需要用到vue的拦截器</p>
</blockquote>
<p>参考 <a target="_blank" rel="noopener" href="https://www.axios-http.cn/docs/interceptors">拦截器 | Axios 中文文档 | Axios 中文网 (axios-http.cn)</a></p>
<p>​		<a target="_blank" rel="noopener" href="https://blog.csdn.net/yuanchangliang/article/details/110501306">Vue:全局拦截所有请求，并在请求头中添加token_yuanchangliang的博客-CSDN博客_vue怎么将token添加到请求头</a></p>
<h4 id="存储token"><a href="#存储token" class="headerlink" title="存储token"></a>存储token</h4><p>现在我们的浏览器会话存储没有存储token值</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214104312254.png" alt="image-20220214104312254"></p>
<p>修改登录代码</p>
<p>在登录方法里的登录成功后增加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">window.sessionStorage.setItem(&#x27;token&#x27;, res.token);/*session放置，存储*/</span><br></pre></td></tr></table></figure>

<p>再次登录发现存储里新增了token</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214105246549.png" alt="image-20220214105246549"></p>
<h4 id="全局拦截"><a href="#全局拦截" class="headerlink" title="全局拦截"></a>全局拦截</h4><p>在<code>main.js</code>中新增语句</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214110603166.png" alt="image-20220214110603166"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  <span class="comment">//写个输出测试一下</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;经过拦截器&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>浏览器控制台输出了测试语句 说明拦截器生效</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214115304651.png" alt="image-20220214115304651"></p>
<p>在请求头添加token信息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  <span class="comment">//写个输出测试一下</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;经过拦截器&quot;</span>);</span><br><span class="line">  <span class="comment">// 请求头添加token</span></span><br><span class="line">  config.<span class="property">headers</span>.<span class="property">common</span>[<span class="string">&#x27;token&#x27;</span>] = sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>再次测试 可以访问其他接口 请求头有token 后端正常</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214135503332.png" alt="image-20220214135503332"></p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214134722387.png" alt="image-20220214134722387"></p>
<h4 id="发现Bug-1"><a href="#发现Bug-1" class="headerlink" title="发现Bug"></a>发现Bug</h4><p>在测试的时候尝试了一下手动F5刷新，然后所有的访问就都被拒了，检查日志后发现时拦截器不生效了导致请求没有携带请求头</p>
<p>上网一番查找发现解决办法<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43288153/article/details/107260223">(Vue 刷新页面后 axios请求拦截器不起作用的解决办法_atrainee的博客-CSDN博客_axios拦截器不起作用</a></p>
<ol>
<li><p>新建<code>http.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  <span class="comment">//写个输出测试一下</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;经过拦截器&quot;</span>);</span><br><span class="line">  <span class="comment">// 请求头添加token</span></span><br><span class="line">  config.<span class="property">headers</span>.<span class="property">common</span>[<span class="string">&#x27;token&#x27;</span>] = sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>));</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改<code>main.js</code></p>
<p>删除</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  <span class="comment">//写个输出测试一下</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;经过拦截器&quot;</span>);</span><br><span class="line">  <span class="comment">// 请求头添加token</span></span><br><span class="line">  config.<span class="property">headers</span>.<span class="property">common</span>[<span class="string">&#x27;token&#x27;</span>] = sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(sessionStorage.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>));</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>添加</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> instance <span class="keyword">from</span> <span class="string">&#x27;./http&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$axios</span> = instance</span><br></pre></td></tr></table></figure>

<h4 id="修复Bug后再次测试"><a href="#修复Bug后再次测试" class="headerlink" title="修复Bug后再次测试"></a>修复Bug后再次测试</h4><p>发现刷新后token请求头仍然存在 bug修复成功</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214141322823.png" alt="image-20220214141322823"></p>
</li>
</ol>
<h2 id="后期优化"><a href="#后期优化" class="headerlink" title="后期优化"></a>后期优化</h2><h3 id="token时间重置"><a href="#token时间重置" class="headerlink" title="token时间重置"></a>token时间重置</h3><p>​		我们在一开始用户登录的时候为用户分配了能使用一个小时的token，如果用户一个小时内一直在使用，但是一个小时零1秒过去后你还是强制把用户退出了显然不合适</p>
<p>​		在后端过滤器增加代码，用户每次访问其它接口都会重置token的生效时间，只要用户一直在访问，token就不会过期</p>
<p>修改<code>LoginHandlerInterceptor</code> 在token生效的if中增加</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重置token时间 为30分钟</span></span><br><span class="line">RedisUtils.redis.expire(token,<span class="number">30L</span>, TimeUnit.MINUTES);</span><br></pre></td></tr></table></figure>

<h3 id="退出时清除用户数据"><a href="#退出时清除用户数据" class="headerlink" title="退出时清除用户数据"></a>退出时清除用户数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">      logout() &#123;</span><br><span class="line">        // 调用删除token接口</span><br><span class="line">        this.$http.post(&quot;fvcs/loginout&quot;)</span><br><span class="line">        //清除浏览器会话存储</span><br><span class="line">        window.sessionStorage.clear();</span><br><span class="line">        //跳转到登录界面</span><br><span class="line">        this.$router.push(&quot;/login&quot;);</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<p>测试发现redis中的信息没有被删除 浏览器显示在调用<code>loginout</code>接口时token为空</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214151336170.png" alt="image-20220214151336170"></p>
<h4 id="发现bug"><a href="#发现bug" class="headerlink" title="发现bug"></a>发现bug</h4><p>在前端退出接口输入res发现token值为空的情况下显示删除成功了 </p>
<p>修复bug</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;loginout&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">logout</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">    Map&lt;String, Object&gt; map_res = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//获取Headers中的参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">        <span class="comment">//从Redis中获取信息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;token:&quot;</span> + token);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">user</span> <span class="operator">=</span> redisTemplate.opsForValue().get(token);</span><br><span class="line">        System.out.println(<span class="string">&quot;user: &quot;</span> + user);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">//删除Redis中的token</span></span><br><span class="line">            <span class="type">Boolean</span> <span class="variable">delete</span> <span class="operator">=</span> redisTemplate.delete(token);</span><br><span class="line">            System.out.println(<span class="string">&quot;登录已注销&quot;</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">            map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;登录已注销&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;200&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;注销失败,token不存在&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;注销失败,token不存在&quot;</span>);</span><br><span class="line">            map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;500&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception exception) &#123;</span><br><span class="line">        exception.printStackTrace();</span><br><span class="line">        System.out.println(<span class="string">&quot;注销失败,未获取到token&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;注销失败&quot;</span>);</span><br><span class="line">        map_res.put(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;500&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JSON.toJSONString(map_res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>至于没有获取到token值的问题</p>
<p>猜测是因为<code>window.sessionStorage.clear();</code>删除会话后才调用的接口</p>
<p>修改代码 使用<code>async</code>和<code>await</code>异步线程 redis删除完毕后再继续清除会话存储</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">async logout() &#123;</span><br><span class="line">  // 调用删除token接口</span><br><span class="line">  const &#123;data: res&#125; = await this.$http.post(&quot;fvcs/loginout&quot;)</span><br><span class="line">  console.log(res)</span><br><span class="line">  //清除浏览器会话存储</span><br><span class="line">  window.sessionStorage.clear();</span><br><span class="line">  //跳转到登录界面</span><br><span class="line">  this.$router.push(&quot;/login&quot;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>再次测试 成功 能成功删除token值 使用postman测试也无法使用此token</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214202703129.png" alt="image-20220214202703129"></p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214202732484.png" alt="image-20220214202732484"></p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214203113349.png" alt="image-20220214203113349"></p>
<h3 id="优化过滤器"><a href="#优化过滤器" class="headerlink" title="优化过滤器"></a>优化过滤器</h3><blockquote>
<p>实际应用中,登录接口,验证接口,退出接口都不需要经过过滤器接受token验证 所以我们把这些不需要经过过滤器的 与登录相关的接口放在&#x2F;user&#x2F;接口注解下</p>
</blockquote>
<h4 id="Controller接口层"><a href="#Controller接口层" class="headerlink" title="Controller接口层"></a>Controller接口层</h4><p>在<code>class</code>外面新增接口注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/&quot;)</span><span class="comment">//接口注解</span></span><br></pre></td></tr></table></figure>

<h4 id="MyMvcConfig配置"><a href="#MyMvcConfig配置" class="headerlink" title="MyMvcConfig配置"></a>MyMvcConfig配置</h4><p>修改拦截</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registry.addInterceptor(new LoginHandlerInterceptor()).addPathPatterns(&quot;/**&quot;).excludePathPatterns(&quot;/user/**&quot;);</span><br></pre></td></tr></table></figure>

<p>只要是<code>/user/</code>下的请求都不用经过拦截器</p>
<h3 id="Token失效跳转"><a href="#Token失效跳转" class="headerlink" title="Token失效跳转"></a>Token失效跳转</h3><blockquote>
<p>在没有获取到token或者没有获取到正确token时，浏览器端会直接跳转到登录界面，很突兀</p>
</blockquote>
<p>我们需要一个提示跳转界面做缓冲，类似<a target="_blank" rel="noopener" href="https://item.btime.com/1">北京时间 (btime.com)</a> 现在好多网站404界面不做自动跳转了，而是用来放广告</p>
<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214224725880.png" alt="image-20220214224725880"></p>
<h4 id="新建unlogin-html"><a href="#新建unlogin-html" class="headerlink" title="新建unlogin.html"></a>新建unlogin.html</h4><p>参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36050720/article/details/100533704">JavaScript&gt;倒计时自动跳转到首页(指定网页)_越努力，越幸福！-CSDN博客</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>未登录跳转<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#ff0000</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    1.显示页面效果--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color:red;font-size:50px;&quot;</span>&gt;</span>你还没有登录或者登录已过期<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;time&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">span</span>&gt;</span>秒之后，跳转到登录页面...</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    如果浏览器没有自动跳转请点击下方连接</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://127.0.0.1:8080/#/login&quot;</span>&gt;</span>回到登录界面<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        分析：</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            1.显示页面效果</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">            2.倒计时读秒效果实现</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                2.1 定义一个方法，获取span标签，修改span标签内容，时间...</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">                2.2 定义一个定时器，1秒执行一次该方法</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    */</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.倒计时读秒效果实现</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> second = <span class="number">5</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.1定义一个方法，获取span标签，修改span标签体内容，时间...</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> time = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;time&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">showTime</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        second --;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//判断时间如果&lt;=0，则跳转到指定页面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (second &lt;= <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//跳转到指定页面</span></span></span><br><span class="line"><span class="language-javascript">            location.<span class="property">href</span> = <span class="string">&quot;http://127.0.0.1:8080/#/login&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        time.<span class="property">innerHTML</span> = second + <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.2 定义一个定时器，1秒执行一次该方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="built_in">setInterval</span>(showTime,<span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/image-20220214231219844.png" alt="image-20220214231219844"></p>
<h4 id="修改拦截器"><a href="#修改拦截器" class="headerlink" title="修改拦截器"></a>修改拦截器</h4><ul>
<li><p>修改MVC配置</p>
<p>为未登录跳转的html界面设置地址使其可以被访问</p>
</li>
<li><p>修改拦截器</p>
</li>
<li><p>01</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/13/Spring/SpringBoot/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBToken%E9%AA%8C%E8%AF%81/" data-id="cl6tgvatz004ol0tn8flk0iht" data-title="SpringBoot前后端分离Token验证" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" rel="tag">SpringBoot前后端分离</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Token%E9%AA%8C%E8%AF%81/" rel="tag">Token验证</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/02/22/JAVA/02%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%8004_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%89%A9%E5%B1%95%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98%E8%AE%B2%E8%A7%A3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          数据类型扩展及面试题讲解
        
      </div>
    </a>
  
  
    <a href="/2022/02/08/JAVA/02%E5%9F%BA%E7%A1%80/Java%E5%9F%BA%E7%A1%8003_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%AE%B2%E8%A7%A3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">数据类型讲解</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/">CentOS</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/%E5%AE%89%E8%A3%85JDK/">安装JDK</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/%E5%AE%89%E8%A3%85MySQL/">安装MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/%E5%AE%89%E8%A3%85Nginx/">安装Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/%E8%AE%BE%E7%BD%AEMySQL/">设置MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/%E8%BF%9E%E6%8E%A5/">连接</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/%E4%BB%A5%E5%90%8E%E5%86%8D%E5%88%86%E7%B1%BB%E5%90%A7/">以后再分类吧</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Python/%E5%B0%8F%E5%B7%A5%E5%85%B7/">小工具</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/Hoxton%E7%89%88%E6%9C%AC/">Hoxton版本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/%E5%85%A5%E9%97%A8/">入门</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/%E5%85%A5%E9%97%A8/Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/">Eureka服务注册与发现</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/">工作</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/%E6%99%BA%E5%B0%A7/">智尧</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/%E6%99%BA%E5%B0%A7/SpringBoot/">SpringBoot</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C/%E6%99%BA%E5%B0%A7/SpringBoot/Token%E9%AA%8C%E8%AF%81/">Token验证</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%88%B7%E6%96%B0/">刷新</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A5%A0%E5%93%A5/">楠哥</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A5%A0%E5%93%A5/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/">开源项目学习</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A5%A0%E5%93%A5/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/%E8%8B%A5%E4%BE%9D%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%89%88/">若依前后端分离版</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/">狂神</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/">狂神说Java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/">Java零基础学习视频通俗易懂</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E5%85%A5%E9%97%A8/">Java入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E5%9F%BA%E7%A1%80/">Java基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E6%95%B0%E7%BB%84/">Java数组</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E6%96%B9%E6%B3%95/">Java方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">Java流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">Java面向对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8B%82%E7%A5%9E/%E7%8B%82%E7%A5%9E%E8%AF%B4Java/Java%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E8%A7%86%E9%A2%91%E9%80%9A%E4%BF%97%E6%98%93%E6%87%82/Java%E9%A2%84%E7%A7%91/">Java预科</a></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/">自学</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/">Java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E5%85%A5%E9%97%A8/">入门</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E5%9F%BA%E7%A1%80/">基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E6%95%B0%E7%BB%84/">数组</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E6%96%B9%E6%B3%95/">方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">流程控制</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E8%8B%A5%E4%BE%9D/">若依</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E8%8B%A5%E4%BE%9D/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/">前后端分离</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">面向对象</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%87%AA%E5%AD%A6/Java/%E9%A2%84%E7%A7%91/">预科</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E8%AE%B0%EF%BC%8C%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">随记，微信小程序</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E8%AE%B0%EF%BC%8C%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%88%B7%E6%96%B0/">刷新</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/" rel="tag">Eureka服务注册与发现</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hoxton%E7%89%88%E6%9C%AC/" rel="tag">Hoxton版本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/" rel="tag">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Cloud%E5%85%A5%E9%97%A8/" rel="tag">Spring Cloud入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" rel="tag">SpringBoot前后端分离</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Token%E9%AA%8C%E8%AF%81/" rel="tag">Token验证</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">云服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A5%E5%90%8E%E5%86%8D%E5%88%86%E7%B1%BB%E5%90%A7/" rel="tag">以后再分类吧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" rel="tag">前后端分离</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E5%B7%A5%E5%85%B7/" rel="tag">小工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">微信小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E7%BB%84/" rel="tag">数组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%B9%E6%B3%95/" rel="tag">方法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A5%A0%E5%93%A5/" rel="tag">楠哥</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" rel="tag">流程控制</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8B%82%E7%A5%9E/" rel="tag">狂神</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%A5%E4%BE%9D/" rel="tag">若依</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E7%BD%AEMySQL/" rel="tag">设置MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9A%8F%E8%AE%B0/" rel="tag">随记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="tag">面向对象</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A2%84%E7%A7%91/" rel="tag">预科</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CentOS/" style="font-size: 14px;">CentOS</a> <a href="/tags/Eureka%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%8E%E5%8F%91%E7%8E%B0/" style="font-size: 10px;">Eureka服务注册与发现</a> <a href="/tags/Hoxton%E7%89%88%E6%9C%AC/" style="font-size: 10px;">Hoxton版本</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MySQL/" style="font-size: 12px;">MySQL</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Python/" style="font-size: 12px;">Python</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Spring-Cloud%E5%85%A5%E9%97%A8/" style="font-size: 10px;">Spring Cloud入门</a> <a href="/tags/SpringBoot%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" style="font-size: 10px;">SpringBoot前后端分离</a> <a href="/tags/Token%E9%AA%8C%E8%AF%81/" style="font-size: 10px;">Token验证</a> <a href="/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 14px;">云服务器</a> <a href="/tags/%E4%BB%A5%E5%90%8E%E5%86%8D%E5%88%86%E7%B1%BB%E5%90%A7/" style="font-size: 10px;">以后再分类吧</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 13px;">入门</a> <a href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" style="font-size: 12px;">前后端分离</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 18px;">基础</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 12px;">安装</a> <a href="/tags/%E5%B0%8F%E5%B7%A5%E5%85%B7/" style="font-size: 12px;">小工具</a> <a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 10px;">微信小程序</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size: 16px;">数组</a> <a href="/tags/%E6%96%B9%E6%B3%95/" style="font-size: 15px;">方法</a> <a href="/tags/%E6%A5%A0%E5%93%A5/" style="font-size: 12px;">楠哥</a> <a href="/tags/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" style="font-size: 17px;">流程控制</a> <a href="/tags/%E7%8B%82%E7%A5%9E/" style="font-size: 19px;">狂神</a> <a href="/tags/%E8%8B%A5%E4%BE%9D/" style="font-size: 12px;">若依</a> <a href="/tags/%E8%AE%BE%E7%BD%AEMySQL/" style="font-size: 10px;">设置MySQL</a> <a href="/tags/%E9%9A%8F%E8%AE%B0/" style="font-size: 10px;">随记</a> <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 16px;">面向对象</a> <a href="/tags/%E9%A2%84%E7%A7%91/" style="font-size: 11px;">预科</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/06/05/%E8%8B%A5%E4%BE%9D/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBVue/4.%E7%99%BB%E5%BD%95%E7%9A%84%E5%AE%9E%E7%8E%B0/">登录的实现</a>
          </li>
        
          <li>
            <a href="/2022/06/04/%E8%8B%A5%E4%BE%9D/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBVue/3.%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0/">验证码的后端实现</a>
          </li>
        
          <li>
            <a href="/2022/05/21/%E8%8B%A5%E4%BE%9D/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BBVue/1.%E8%BF%90%E8%A1%8C%E8%8B%A5%E4%BE%9D%E9%A1%B9%E7%9B%AE/">运行若依项目</a>
          </li>
        
          <li>
            <a href="/2022/05/09/Python%E5%B0%8F%E5%B7%A5%E5%85%B7/%E8%AF%AD%E9%9F%B3%E6%92%AD%E6%8A%A5/">语音播报</a>
          </li>
        
          <li>
            <a href="/2022/05/09/Python%E5%B0%8F%E5%B7%A5%E5%85%B7/%E5%8A%A8%E6%80%81%E6%8A%93%E6%8B%8D/">运动抓拍</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>